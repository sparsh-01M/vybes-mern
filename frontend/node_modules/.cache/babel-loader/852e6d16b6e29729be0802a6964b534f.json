{"ast":null,"code":"var _jsxFileName = \"/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/src/components/Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport \"./Profile.css\";\nimport VideoCard from \"./VideoCard\";\nimport PostDetail from \"./PostDetail\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Profile() {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    userid\n  } = useParams();\n  const picLink = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\"; // State declarations\n\n  const [pic, setPic] = useState([]);\n  const [show, setShow] = useState(false);\n  const [posts, setPosts] = useState([]);\n  const [user, setUser] = useState(\"\");\n  const [videos, setVideos] = useState([]);\n  const [activeTab, setActiveTab] = useState('posts');\n  const [loading, setLoading] = useState(true);\n  const [isFollow, setIsFollow] = useState(false);\n  const [userProfile, setUserProfile] = useState(null); // Fetch user data\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        const token = localStorage.getItem(\"jwt\");\n\n        if (!token) {\n          console.log(\"No JWT token found\");\n          return;\n        } // Get user ID from token or params\n\n\n        const storedUserData = JSON.parse(localStorage.getItem(\"user\"));\n        const userId = userid || storedUserData._id;\n        console.log(\"Fetching data for user:\", userId); // Fetch user data and posts\n\n        const userRes = await fetch(`http://localhost:4000/user/${userId}`, {\n          headers: {\n            Authorization: \"Bearer \" + token\n          }\n        });\n        const fetchedUserData = await userRes.json();\n        console.log(\"User data response:\", fetchedUserData);\n        setUser(fetchedUserData.user);\n        setUserProfile(fetchedUserData.user);\n        setPosts(fetchedUserData.post); // Check if current user is following this profile\n\n        if (fetchedUserData.user.followers.includes(storedUserData._id)) {\n          setIsFollow(true);\n        } // Fetch user's videos\n\n\n        console.log(\"Fetching videos for user:\", userId);\n        const videosRes = await fetch(`http://localhost:4000/video/user/${userId}`, {\n          headers: {\n            Authorization: \"Bearer \" + token\n          }\n        });\n        console.log(\"Videos response status:\", videosRes.status);\n        const videosData = await videosRes.json();\n        console.log(\"Raw videos data:\", videosData);\n        setVideos(videosData);\n      } catch (err) {\n        console.error(\"Error fetching user data:\", err);\n        setVideos([]);\n        toast.error(\"Error loading profile data\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [userid]); // Follow user\n\n  const followUser = async userId => {\n    try {\n      const res = await fetch(\"http://localhost:4000/follow\", {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n        },\n        body: JSON.stringify({\n          followId: userId\n        })\n      });\n      const data = await res.json();\n      console.log(data);\n      setIsFollow(true); // Update user profile with new follower\n\n      setUserProfile(prev => ({ ...prev,\n        followers: [...((prev === null || prev === void 0 ? void 0 : prev.followers) || []), JSON.parse(localStorage.getItem(\"user\"))._id]\n      }));\n      toast.success(\"Following user\");\n    } catch (err) {\n      console.error(\"Error following user:\", err);\n      toast.error(\"Error following user\");\n    }\n  }; // Unfollow user\n\n\n  const unfollowUser = async userId => {\n    try {\n      const res = await fetch(\"http://localhost:4000/unfollow\", {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n        },\n        body: JSON.stringify({\n          followId: userId\n        })\n      });\n      const data = await res.json();\n      console.log(data);\n      setIsFollow(false); // Update user profile by removing follower\n\n      setUserProfile(prev => ({ ...prev,\n        followers: ((prev === null || prev === void 0 ? void 0 : prev.followers) || []).filter(id => id !== JSON.parse(localStorage.getItem(\"user\"))._id)\n      }));\n      toast.success(\"Unfollowed user\");\n    } catch (err) {\n      console.error(\"Error unfollowing user:\", err);\n      toast.error(\"Error unfollowing user\");\n    }\n  };\n\n  const handleVideoUpdate = () => {\n    // Refetch videos after update\n    const fetchVideos = async () => {\n      try {\n        const token = localStorage.getItem(\"jwt\");\n        const userData = JSON.parse(localStorage.getItem(\"user\"));\n        const userId = userid || userData._id;\n        const videosRes = await fetch(`http://localhost:4000/video/user/${userId}`, {\n          headers: {\n            Authorization: \"Bearer \" + token\n          }\n        });\n        const videosData = await videosRes.json();\n        setVideos(videosData);\n      } catch (err) {\n        console.error(\"Error refetching videos:\", err);\n        toast.error(\"Error refreshing videos\");\n      }\n    };\n\n    fetchVideos();\n  };\n\n  const toggleDetails = post => {\n    setShow(!show);\n    setPic(post);\n  };\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-frame\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-pic\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: user.Photo ? user.Photo : picLink,\n          alt: \"\",\n          onClick: () => {\n            if (user._id === JSON.parse(localStorage.getItem(\"user\"))._id) {\n              navigate(\"/profile\");\n            }\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-data\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: user.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this), user._id !== JSON.parse(localStorage.getItem(\"user\"))._id && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"followBtn\",\n            onClick: () => {\n              if (isFollow) {\n                unfollowUser(user._id);\n              } else {\n                followUser(user._id);\n              }\n            },\n            children: isFollow ? \"Unfollow\" : \"Follow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-info\",\n          style: {\n            display: \"flex\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [posts ? posts.length : 0, \" posts\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [videos ? videos.length : 0, \" videos\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [user.followers ? user.followers.length : 0, \" followers\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [user.following ? user.following.length : 0, \" following\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      style: {\n        width: \"90%\",\n        opacity: \"0.8\",\n        margin: \"25px auto\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-tabs\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'posts' ? 'active' : ''}`,\n        onClick: () => setActiveTab('posts'),\n        children: \"Posts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'videos' ? 'active' : ''}`,\n        onClick: () => setActiveTab('videos'),\n        children: \"Videos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this), activeTab === 'posts' ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"gallery\",\n      children: posts && posts.map(pics => /*#__PURE__*/_jsxDEV(\"img\", {\n        src: pics.photo,\n        className: \"item\",\n        alt: \"\",\n        onClick: () => toggleDetails(pics)\n      }, pics._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"videos-grid\",\n      children: videos && videos.map(video => /*#__PURE__*/_jsxDEV(VideoCard, {\n        video: video,\n        onVideoUpdate: handleVideoUpdate\n      }, video._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 9\n    }, this), show && /*#__PURE__*/_jsxDEV(PostDetail, {\n      item: pic,\n      toggleDetails: toggleDetails\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 16\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Profile, \"QSgucSFaGuRJ20+1Y/5Yy5/O3xQ=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useEffect","useState","VideoCard","PostDetail","useParams","useNavigate","toast","Profile","navigate","userid","picLink","pic","setPic","show","setShow","posts","setPosts","user","setUser","videos","setVideos","activeTab","setActiveTab","loading","setLoading","isFollow","setIsFollow","userProfile","setUserProfile","fetchData","token","localStorage","getItem","console","log","storedUserData","JSON","parse","userId","_id","userRes","fetch","headers","Authorization","fetchedUserData","json","post","followers","includes","videosRes","status","videosData","err","error","followUser","res","method","body","stringify","followId","data","prev","success","unfollowUser","filter","id","handleVideoUpdate","fetchVideos","userData","toggleDetails","Photo","display","alignItems","justifyContent","name","length","following","width","opacity","margin","map","pics","photo","video"],"sources":["/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/src/components/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./Profile.css\";\nimport VideoCard from \"./VideoCard\";\nimport PostDetail from \"./PostDetail\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\n\nexport default function Profile() {\n  const navigate = useNavigate();\n  const { userid } = useParams();\n  const picLink = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";\n  \n  // State declarations\n  const [pic, setPic] = useState([]);\n  const [show, setShow] = useState(false);\n  const [posts, setPosts] = useState([]);\n  const [user, setUser] = useState(\"\");\n  const [videos, setVideos] = useState([]);\n  const [activeTab, setActiveTab] = useState('posts');\n  const [loading, setLoading] = useState(true);\n  const [isFollow, setIsFollow] = useState(false);\n  const [userProfile, setUserProfile] = useState(null);\n\n  // Fetch user data\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        setLoading(true);\n        const token = localStorage.getItem(\"jwt\");\n        if (!token) {\n          console.log(\"No JWT token found\");\n          return;\n        }\n\n        // Get user ID from token or params\n        const storedUserData = JSON.parse(localStorage.getItem(\"user\"));\n        const userId = userid || storedUserData._id;\n        console.log(\"Fetching data for user:\", userId);\n\n        // Fetch user data and posts\n        const userRes = await fetch(`http://localhost:4000/user/${userId}`, {\n          headers: {\n            Authorization: \"Bearer \" + token,\n          },\n        });\n        const fetchedUserData = await userRes.json();\n        console.log(\"User data response:\", fetchedUserData);\n        setUser(fetchedUserData.user);\n        setUserProfile(fetchedUserData.user);\n        setPosts(fetchedUserData.post);\n\n        // Check if current user is following this profile\n        if (fetchedUserData.user.followers.includes(storedUserData._id)) {\n          setIsFollow(true);\n        }\n\n        // Fetch user's videos\n        console.log(\"Fetching videos for user:\", userId);\n        const videosRes = await fetch(`http://localhost:4000/video/user/${userId}`, {\n          headers: {\n            Authorization: \"Bearer \" + token,\n          },\n        });\n        console.log(\"Videos response status:\", videosRes.status);\n        const videosData = await videosRes.json();\n        console.log(\"Raw videos data:\", videosData);\n        setVideos(videosData);\n      } catch (err) {\n        console.error(\"Error fetching user data:\", err);\n        setVideos([]);\n        toast.error(\"Error loading profile data\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [userid]);\n\n  // Follow user\n  const followUser = async (userId) => {\n    try {\n      const res = await fetch(\"http://localhost:4000/follow\", {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        },\n        body: JSON.stringify({\n          followId: userId,\n        }),\n      });\n      const data = await res.json();\n      console.log(data);\n      setIsFollow(true);\n      \n      // Update user profile with new follower\n      setUserProfile(prev => ({\n        ...prev,\n        followers: [...(prev?.followers || []), JSON.parse(localStorage.getItem(\"user\"))._id]\n      }));\n      \n      toast.success(\"Following user\");\n    } catch (err) {\n      console.error(\"Error following user:\", err);\n      toast.error(\"Error following user\");\n    }\n  };\n\n  // Unfollow user\n  const unfollowUser = async (userId) => {\n    try {\n      const res = await fetch(\"http://localhost:4000/unfollow\", {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        },\n        body: JSON.stringify({\n          followId: userId,\n        }),\n      });\n      const data = await res.json();\n      console.log(data);\n      setIsFollow(false);\n      \n      // Update user profile by removing follower\n      setUserProfile(prev => ({\n        ...prev,\n        followers: (prev?.followers || []).filter(id => id !== JSON.parse(localStorage.getItem(\"user\"))._id)\n      }));\n      \n      toast.success(\"Unfollowed user\");\n    } catch (err) {\n      console.error(\"Error unfollowing user:\", err);\n      toast.error(\"Error unfollowing user\");\n    }\n  };\n\n  const handleVideoUpdate = () => {\n    // Refetch videos after update\n    const fetchVideos = async () => {\n      try {\n        const token = localStorage.getItem(\"jwt\");\n        const userData = JSON.parse(localStorage.getItem(\"user\"));\n        const userId = userid || userData._id;\n\n        const videosRes = await fetch(`http://localhost:4000/video/user/${userId}`, {\n          headers: {\n            Authorization: \"Bearer \" + token,\n          },\n        });\n        const videosData = await videosRes.json();\n        setVideos(videosData);\n      } catch (err) {\n        console.error(\"Error refetching videos:\", err);\n        toast.error(\"Error refreshing videos\");\n      }\n    };\n    fetchVideos();\n  };\n\n  const toggleDetails = (post) => {\n    setShow(!show);\n    setPic(post);\n  };\n\n  if (loading) {\n    return <div className=\"profile\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"profile\">\n      {/* Profile frame */}\n      <div className=\"profile-frame\">\n        {/* profile-pic */}\n        <div className=\"profile-pic\">\n          <img \n            src={user.Photo ? user.Photo : picLink} \n            alt=\"\" \n            onClick={() => {\n              if (user._id === JSON.parse(localStorage.getItem(\"user\"))._id) {\n                navigate(\"/profile\");\n              }\n            }}\n          />\n        </div>\n        {/* profile-data */}\n        <div className=\"profile-data\">\n          <div style={{\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\",\n          }}>\n            <h1>{user.name}</h1>\n            {user._id !== JSON.parse(localStorage.getItem(\"user\"))._id && (\n              <button\n                className=\"followBtn\"\n                onClick={() => {\n                  if (isFollow) {\n                    unfollowUser(user._id);\n                  } else {\n                    followUser(user._id);\n                  }\n                }}\n              >\n                {isFollow ? \"Unfollow\" : \"Follow\"}\n              </button>\n            )}\n          </div>\n          <div className=\"profile-info\" style={{ display: \"flex\" }}>\n            <p>{posts ? posts.length : 0} posts</p>\n            <p>{videos ? videos.length : 0} videos</p>\n            <p>{user.followers ? user.followers.length : 0} followers</p>\n            <p>{user.following ? user.following.length : 0} following</p>\n          </div>\n        </div>\n      </div>\n      <hr\n        style={{\n          width: \"90%\",\n          opacity: \"0.8\",\n          margin: \"25px auto\",\n        }}\n      />\n\n      {/* Tabs */}\n      <div className=\"profile-tabs\">\n        <button\n          className={`tab-button ${activeTab === 'posts' ? 'active' : ''}`}\n          onClick={() => setActiveTab('posts')}\n        >\n          Posts\n        </button>\n        <button\n          className={`tab-button ${activeTab === 'videos' ? 'active' : ''}`}\n          onClick={() => setActiveTab('videos')}\n        >\n          Videos\n        </button>\n      </div>\n\n      {/* Content based on active tab */}\n      {activeTab === 'posts' ? (\n        <div className=\"gallery\">\n          {posts && posts.map((pics) => (\n            <img\n              key={pics._id}\n              src={pics.photo}\n              className=\"item\"\n              alt=\"\"\n              onClick={() => toggleDetails(pics)}\n            />\n          ))}\n        </div>\n      ) : (\n        <div className=\"videos-grid\">\n          {videos && videos.map((video) => (\n            <VideoCard\n              key={video._id}\n              video={video}\n              onVideoUpdate={handleVideoUpdate}\n            />\n          ))}\n        </div>\n      )}\n      {show && <PostDetail item={pic} toggleDetails={toggleDetails} />}\n    </div>\n  );\n} "],"mappings":"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"},"metadata":{},"sourceType":"module"}