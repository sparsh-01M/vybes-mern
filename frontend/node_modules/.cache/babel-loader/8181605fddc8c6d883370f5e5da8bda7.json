{"ast":null,"code":"var _jsxFileName = \"/Users/sparshsinghal/Downloads/Instagram-mern-stack-main/frontend/src/pages/AudiobookCard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport './AudiobookCard.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst AudiobookCard = _ref => {\n  _s();\n\n  let {\n    audiobook,\n    currentlyPlaying,\n    setCurrentlyPlaying\n  } = _ref;\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [audio] = useState(new Audio(audiobook.audioUrl)); // Check if this card's audio is currently playing\n\n  useEffect(() => {\n    // Set isPlaying to true only if this audio instance is the currently playing one\n    setIsPlaying(currentlyPlaying === audio); // Add event listeners to handle when audio ends\n\n    const handleEnded = () => {\n      setIsPlaying(false);\n\n      if (currentlyPlaying === audio) {\n        setCurrentlyPlaying(null);\n      }\n    };\n\n    audio.addEventListener('ended', handleEnded);\n    return () => {\n      audio.removeEventListener('ended', handleEnded); // Ensure audio is paused when component unmounts\n\n      audio.pause();\n    };\n  }, [audio, currentlyPlaying, setCurrentlyPlaying]);\n\n  const togglePlay = () => {\n    if (isPlaying) {\n      // If this audio is already playing, pause it\n      audio.pause();\n      setCurrentlyPlaying(null);\n    } else {\n      // If another audio is playing, pause it first\n      if (currentlyPlaying && currentlyPlaying !== audio) {\n        currentlyPlaying.pause();\n      } // Start playing this audio\n\n\n      audio.play();\n      setCurrentlyPlaying(audio);\n    }\n  };\n\n  const truncateText = (text, maxLength) => {\n    if (!text) return '';\n    if (text.length <= maxLength) return text;\n    return text.substr(0, maxLength) + '...';\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"audiobook-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"audiobook-thumbnail\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: audiobook.thumbnailUrl,\n        alt: audiobook.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `play-button ${isPlaying ? 'playing' : ''}`,\n        onClick: togglePlay,\n        children: isPlaying ? '❚❚' : '▶'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"audiobook-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"audiobook-title\",\n        children: truncateText(audiobook.title, 40)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"audiobook-author\",\n        children: [\"By \", audiobook.author]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"audiobook-description\",\n        children: truncateText(audiobook.description, 100)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"audiobook-duration\",\n        children: audiobook.duration || 'Unknown duration'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AudiobookCard, \"XwZzW5KFEKGiBObTVigbiHHURhQ=\");\n\n_c = AudiobookCard;\nexport default AudiobookCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"AudiobookCard\");","map":{"version":3,"names":["React","useState","useEffect","AudiobookCard","audiobook","currentlyPlaying","setCurrentlyPlaying","isPlaying","setIsPlaying","audio","Audio","audioUrl","handleEnded","addEventListener","removeEventListener","pause","togglePlay","play","truncateText","text","maxLength","length","substr","thumbnailUrl","title","author","description","duration"],"sources":["/Users/sparshsinghal/Downloads/Instagram-mern-stack-main/frontend/src/pages/AudiobookCard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './AudiobookCard.css';\n\nconst AudiobookCard = ({ audiobook, currentlyPlaying, setCurrentlyPlaying }) => {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [audio] = useState(new Audio(audiobook.audioUrl));\n\n  // Check if this card's audio is currently playing\n  useEffect(() => {\n    // Set isPlaying to true only if this audio instance is the currently playing one\n    setIsPlaying(currentlyPlaying === audio);\n    \n    // Add event listeners to handle when audio ends\n    const handleEnded = () => {\n      setIsPlaying(false);\n      if (currentlyPlaying === audio) {\n        setCurrentlyPlaying(null);\n      }\n    };\n    \n    audio.addEventListener('ended', handleEnded);\n    \n    return () => {\n      audio.removeEventListener('ended', handleEnded);\n      // Ensure audio is paused when component unmounts\n      audio.pause();\n    };\n  }, [audio, currentlyPlaying, setCurrentlyPlaying]);\n\n  const togglePlay = () => {\n    if (isPlaying) {\n      // If this audio is already playing, pause it\n      audio.pause();\n      setCurrentlyPlaying(null);\n    } else {\n      // If another audio is playing, pause it first\n      if (currentlyPlaying && currentlyPlaying !== audio) {\n        currentlyPlaying.pause();\n      }\n      \n      // Start playing this audio\n      audio.play();\n      setCurrentlyPlaying(audio);\n    }\n  };\n\n  const truncateText = (text, maxLength) => {\n    if (!text) return '';\n    if (text.length <= maxLength) return text;\n    return text.substr(0, maxLength) + '...';\n  };\n\n  return (\n    <div className=\"audiobook-card\">\n      <div className=\"audiobook-thumbnail\">\n        <img src={audiobook.thumbnailUrl} alt={audiobook.title} />\n        <button \n          className={`play-button ${isPlaying ? 'playing' : ''}`} \n          onClick={togglePlay}\n        >\n          {isPlaying ? '❚❚' : '▶'}\n        </button>\n      </div>\n      <div className=\"audiobook-info\">\n        <h3 className=\"audiobook-title\">{truncateText(audiobook.title, 40)}</h3>\n        <p className=\"audiobook-author\">By {audiobook.author}</p>\n        <p className=\"audiobook-description\">{truncateText(audiobook.description, 100)}</p>\n        <p className=\"audiobook-duration\">{audiobook.duration || 'Unknown duration'}</p>\n      </div>\n    </div>\n  );\n};\n\nexport default AudiobookCard;"],"mappings":"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"},"metadata":{},"sourceType":"module"}