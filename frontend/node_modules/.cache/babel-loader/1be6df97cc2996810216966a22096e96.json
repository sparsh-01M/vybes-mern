{"ast":null,"code":"var _jsxFileName = \"/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/src/components/Profile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useCallback } from \"react\";\nimport \"./Profile.css\";\nimport VideoCard from \"./VideoCard\";\nimport PostDetail from \"./PostDetail\";\nimport ProfilePic from \"./ProfilePic\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Profile() {\n  _s();\n\n  const navigate = useNavigate();\n  const {\n    userid\n  } = useParams();\n  const picLink = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\"; // State declarations\n\n  const [pic, setPic] = useState([]);\n  const [show, setShow] = useState(false);\n  const [posts, setPosts] = useState([]);\n  const [user, setUser] = useState(\"\");\n  const [videos, setVideos] = useState([]);\n  const [activeTab, setActiveTab] = useState('posts');\n  const [loading, setLoading] = useState(true);\n  const [isFollow, setIsFollow] = useState(false);\n  const [userProfile, setUserProfile] = useState(null);\n  const [showProfilePic, setShowProfilePic] = useState(false); // Move fetchData outside useEffect and wrap in useCallback\n\n  const fetchData = useCallback(async () => {\n    try {\n      setLoading(true);\n      const token = localStorage.getItem(\"jwt\");\n\n      if (!token) {\n        console.log(\"No JWT token found\");\n        return;\n      } // Get user ID from token or params\n\n\n      const storedUserData = JSON.parse(localStorage.getItem(\"user\"));\n      const userId = userid || storedUserData._id;\n      console.log(\"Fetching data for user:\", userId); // Fetch user data and posts\n\n      const userRes = await fetch(`http://localhost:4000/user/${userId}`, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      const fetchedUserData = await userRes.json();\n      console.log(\"User data response:\", fetchedUserData);\n      setUser(fetchedUserData.user);\n      setUserProfile(fetchedUserData.user);\n      setPosts(fetchedUserData.post); // Check if current user is following this profile\n\n      if (fetchedUserData.user.followers.includes(storedUserData._id)) {\n        setIsFollow(true);\n      } // Fetch user's videos with correct endpoint\n\n\n      console.log(\"Fetching videos for user:\", userId);\n      const videosRes = await fetch(`http://localhost:4000/videos/user/${userId}`, {\n        headers: {\n          Authorization: \"Bearer \" + token\n        }\n      });\n      console.log(\"Videos response status:\", videosRes.status);\n      const videosData = await videosRes.json();\n      console.log(\"Raw videos data:\", videosData);\n      setVideos(videosData);\n    } catch (err) {\n      console.error(\"Error fetching user data:\", err);\n      setVideos([]);\n      toast.error(\"Error loading profile data\");\n    } finally {\n      setLoading(false);\n    }\n  }, [userid]); // Update useEffect to use fetchData\n\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]); // Add fetchData as dependency\n  // Follow user\n\n  const followUser = async userId => {\n    try {\n      const res = await fetch(\"http://localhost:4000/follow\", {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n        },\n        body: JSON.stringify({\n          followId: userId\n        })\n      });\n      const data = await res.json();\n      console.log(data);\n      setIsFollow(true); // Update user profile with new follower\n\n      setUserProfile(prev => ({ ...prev,\n        followers: [...((prev === null || prev === void 0 ? void 0 : prev.followers) || []), JSON.parse(localStorage.getItem(\"user\"))._id]\n      }));\n      toast.success(\"Following user\");\n    } catch (err) {\n      console.error(\"Error following user:\", err);\n      toast.error(\"Error following user\");\n    }\n  }; // Unfollow user\n\n\n  const unfollowUser = async userId => {\n    try {\n      const res = await fetch(\"http://localhost:4000/unfollow\", {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n        },\n        body: JSON.stringify({\n          followId: userId\n        })\n      });\n      const data = await res.json();\n      console.log(data);\n      setIsFollow(false); // Update user profile by removing follower\n\n      setUserProfile(prev => ({ ...prev,\n        followers: ((prev === null || prev === void 0 ? void 0 : prev.followers) || []).filter(id => id !== JSON.parse(localStorage.getItem(\"user\"))._id)\n      }));\n      toast.success(\"Unfollowed user\");\n    } catch (err) {\n      console.error(\"Error unfollowing user:\", err);\n      toast.error(\"Error unfollowing user\");\n    }\n  }; // Update handleVideoUpdate to use correct endpoint\n\n\n  const handleVideoUpdate = () => {\n    const fetchVideos = async () => {\n      try {\n        const token = localStorage.getItem(\"jwt\");\n        const userData = JSON.parse(localStorage.getItem(\"user\"));\n        const userId = userid || userData._id;\n        const videosRes = await fetch(`http://localhost:4000/videos/user/${userId}`, {\n          headers: {\n            Authorization: \"Bearer \" + token\n          }\n        });\n        const videosData = await videosRes.json();\n        setVideos(videosData);\n      } catch (err) {\n        console.error(\"Error refetching videos:\", err);\n        toast.error(\"Error refreshing videos\");\n      }\n    };\n\n    fetchVideos();\n  }; // Add function to handle profile picture change\n\n\n  const handleProfilePicChange = () => {\n    setShowProfilePic(false); // Refetch user data to get updated profile picture\n\n    fetchData();\n  };\n\n  const toggleDetails = post => {\n    setShow(!show);\n    setPic(post);\n  };\n\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-frame\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-pic\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: user.Photo ? user.Photo : picLink,\n          alt: \"\",\n          onClick: () => {\n            if (user._id === JSON.parse(localStorage.getItem(\"user\"))._id) {\n              setShowProfilePic(true);\n            } else {\n              navigate(\"/profile\");\n            }\n          },\n          style: {\n            cursor: user._id === JSON.parse(localStorage.getItem(\"user\"))._id ? 'pointer' : 'default'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-data\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: user.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), user._id !== JSON.parse(localStorage.getItem(\"user\"))._id && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"followBtn\",\n            onClick: () => {\n              if (isFollow) {\n                unfollowUser(user._id);\n              } else {\n                followUser(user._id);\n              }\n            },\n            children: isFollow ? \"Unfollow\" : \"Follow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-info\",\n          style: {\n            display: \"flex\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [posts ? posts.length : 0, \" posts\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [videos ? videos.length : 0, \" videos\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [user.followers ? user.followers.length : 0, \" followers\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [user.following ? user.following.length : 0, \" following\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      style: {\n        width: \"90%\",\n        opacity: \"0.8\",\n        margin: \"25px auto\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-tabs\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'posts' ? 'active' : ''}`,\n        onClick: () => setActiveTab('posts'),\n        children: \"Posts\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `tab-button ${activeTab === 'videos' ? 'active' : ''}`,\n        onClick: () => setActiveTab('videos'),\n        children: \"Videos\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }, this), activeTab === 'posts' ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"gallery\",\n      children: posts && posts.map(pics => /*#__PURE__*/_jsxDEV(\"img\", {\n        src: pics.photo,\n        className: \"item\",\n        alt: \"\",\n        onClick: () => toggleDetails(pics)\n      }, pics._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"videos-grid\",\n      children: videos && videos.map(video => /*#__PURE__*/_jsxDEV(VideoCard, {\n        video: video,\n        onVideoUpdate: handleVideoUpdate\n      }, video._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 9\n    }, this), show && /*#__PURE__*/_jsxDEV(PostDetail, {\n      item: pic,\n      toggleDetails: toggleDetails\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 16\n    }, this), showProfilePic && /*#__PURE__*/_jsxDEV(ProfilePic, {\n      changeprofile: handleProfilePicChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 183,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Profile, \"/hnZKicnSPuq42pvIG7mL8SKZAQ=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","VideoCard","PostDetail","ProfilePic","useParams","useNavigate","toast","Profile","navigate","userid","picLink","pic","setPic","show","setShow","posts","setPosts","user","setUser","videos","setVideos","activeTab","setActiveTab","loading","setLoading","isFollow","setIsFollow","userProfile","setUserProfile","showProfilePic","setShowProfilePic","fetchData","token","localStorage","getItem","console","log","storedUserData","JSON","parse","userId","_id","userRes","fetch","headers","Authorization","fetchedUserData","json","post","followers","includes","videosRes","status","videosData","err","error","followUser","res","method","body","stringify","followId","data","prev","success","unfollowUser","filter","id","handleVideoUpdate","fetchVideos","userData","handleProfilePicChange","toggleDetails","Photo","cursor","display","alignItems","justifyContent","name","length","following","width","opacity","margin","map","pics","photo","video"],"sources":["/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/src/components/Profile.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\nimport \"./Profile.css\";\nimport VideoCard from \"./VideoCard\";\nimport PostDetail from \"./PostDetail\";\nimport ProfilePic from \"./ProfilePic\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\n\nexport default function Profile() {\n  const navigate = useNavigate();\n  const { userid } = useParams();\n  const picLink = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";\n  \n  // State declarations\n  const [pic, setPic] = useState([]);\n  const [show, setShow] = useState(false);\n  const [posts, setPosts] = useState([]);\n  const [user, setUser] = useState(\"\");\n  const [videos, setVideos] = useState([]);\n  const [activeTab, setActiveTab] = useState('posts');\n  const [loading, setLoading] = useState(true);\n  const [isFollow, setIsFollow] = useState(false);\n  const [userProfile, setUserProfile] = useState(null);\n  const [showProfilePic, setShowProfilePic] = useState(false);\n\n  // Move fetchData outside useEffect and wrap in useCallback\n  const fetchData = useCallback(async () => {\n    try {\n      setLoading(true);\n      const token = localStorage.getItem(\"jwt\");\n      if (!token) {\n        console.log(\"No JWT token found\");\n        return;\n      }\n\n      // Get user ID from token or params\n      const storedUserData = JSON.parse(localStorage.getItem(\"user\"));\n      const userId = userid || storedUserData._id;\n      console.log(\"Fetching data for user:\", userId);\n\n      // Fetch user data and posts\n      const userRes = await fetch(`http://localhost:4000/user/${userId}`, {\n        headers: {\n          Authorization: \"Bearer \" + token,\n        },\n      });\n      const fetchedUserData = await userRes.json();\n      console.log(\"User data response:\", fetchedUserData);\n      setUser(fetchedUserData.user);\n      setUserProfile(fetchedUserData.user);\n      setPosts(fetchedUserData.post);\n\n      // Check if current user is following this profile\n      if (fetchedUserData.user.followers.includes(storedUserData._id)) {\n        setIsFollow(true);\n      }\n\n      // Fetch user's videos with correct endpoint\n      console.log(\"Fetching videos for user:\", userId);\n      const videosRes = await fetch(`http://localhost:4000/videos/user/${userId}`, {\n        headers: {\n          Authorization: \"Bearer \" + token,\n        },\n      });\n      console.log(\"Videos response status:\", videosRes.status);\n      const videosData = await videosRes.json();\n      console.log(\"Raw videos data:\", videosData);\n      setVideos(videosData);\n    } catch (err) {\n      console.error(\"Error fetching user data:\", err);\n      setVideos([]);\n      toast.error(\"Error loading profile data\");\n    } finally {\n      setLoading(false);\n    }\n  }, [userid]);\n\n  // Update useEffect to use fetchData\n  useEffect(() => {\n    fetchData();\n  }, [fetchData]); // Add fetchData as dependency\n\n  // Follow user\n  const followUser = async (userId) => {\n    try {\n      const res = await fetch(\"http://localhost:4000/follow\", {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        },\n        body: JSON.stringify({\n          followId: userId,\n        }),\n      });\n      const data = await res.json();\n      console.log(data);\n      setIsFollow(true);\n      \n      // Update user profile with new follower\n      setUserProfile(prev => ({\n        ...prev,\n        followers: [...(prev?.followers || []), JSON.parse(localStorage.getItem(\"user\"))._id]\n      }));\n      \n      toast.success(\"Following user\");\n    } catch (err) {\n      console.error(\"Error following user:\", err);\n      toast.error(\"Error following user\");\n    }\n  };\n\n  // Unfollow user\n  const unfollowUser = async (userId) => {\n    try {\n      const res = await fetch(\"http://localhost:4000/unfollow\", {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        },\n        body: JSON.stringify({\n          followId: userId,\n        }),\n      });\n      const data = await res.json();\n      console.log(data);\n      setIsFollow(false);\n      \n      // Update user profile by removing follower\n      setUserProfile(prev => ({\n        ...prev,\n        followers: (prev?.followers || []).filter(id => id !== JSON.parse(localStorage.getItem(\"user\"))._id)\n      }));\n      \n      toast.success(\"Unfollowed user\");\n    } catch (err) {\n      console.error(\"Error unfollowing user:\", err);\n      toast.error(\"Error unfollowing user\");\n    }\n  };\n\n  // Update handleVideoUpdate to use correct endpoint\n  const handleVideoUpdate = () => {\n    const fetchVideos = async () => {\n      try {\n        const token = localStorage.getItem(\"jwt\");\n        const userData = JSON.parse(localStorage.getItem(\"user\"));\n        const userId = userid || userData._id;\n\n        const videosRes = await fetch(`http://localhost:4000/videos/user/${userId}`, {\n          headers: {\n            Authorization: \"Bearer \" + token,\n          },\n        });\n        const videosData = await videosRes.json();\n        setVideos(videosData);\n      } catch (err) {\n        console.error(\"Error refetching videos:\", err);\n        toast.error(\"Error refreshing videos\");\n      }\n    };\n    fetchVideos();\n  };\n\n  // Add function to handle profile picture change\n  const handleProfilePicChange = () => {\n    setShowProfilePic(false);\n    // Refetch user data to get updated profile picture\n    fetchData();\n  };\n\n  const toggleDetails = (post) => {\n    setShow(!show);\n    setPic(post);\n  };\n\n  if (loading) {\n    return <div className=\"profile\">Loading...</div>;\n  }\n\n  return (\n    <div className=\"profile\">\n      {/* Profile frame */}\n      <div className=\"profile-frame\">\n        {/* profile-pic */}\n        <div className=\"profile-pic\">\n          <img \n            src={user.Photo ? user.Photo : picLink} \n            alt=\"\" \n            onClick={() => {\n              if (user._id === JSON.parse(localStorage.getItem(\"user\"))._id) {\n                setShowProfilePic(true);\n              } else {\n                navigate(\"/profile\");\n              }\n            }}\n            style={{ cursor: user._id === JSON.parse(localStorage.getItem(\"user\"))._id ? 'pointer' : 'default' }}\n          />\n        </div>\n        {/* profile-data */}\n        <div className=\"profile-data\">\n          <div style={{\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\",\n          }}>\n            <h1>{user.name}</h1>\n            {user._id !== JSON.parse(localStorage.getItem(\"user\"))._id && (\n              <button\n                className=\"followBtn\"\n                onClick={() => {\n                  if (isFollow) {\n                    unfollowUser(user._id);\n                  } else {\n                    followUser(user._id);\n                  }\n                }}\n              >\n                {isFollow ? \"Unfollow\" : \"Follow\"}\n              </button>\n            )}\n          </div>\n          <div className=\"profile-info\" style={{ display: \"flex\" }}>\n            <p>{posts ? posts.length : 0} posts</p>\n            <p>{videos ? videos.length : 0} videos</p>\n            <p>{user.followers ? user.followers.length : 0} followers</p>\n            <p>{user.following ? user.following.length : 0} following</p>\n          </div>\n        </div>\n      </div>\n      <hr\n        style={{\n          width: \"90%\",\n          opacity: \"0.8\",\n          margin: \"25px auto\",\n        }}\n      />\n\n      {/* Tabs */}\n      <div className=\"profile-tabs\">\n        <button\n          className={`tab-button ${activeTab === 'posts' ? 'active' : ''}`}\n          onClick={() => setActiveTab('posts')}\n        >\n          Posts\n        </button>\n        <button\n          className={`tab-button ${activeTab === 'videos' ? 'active' : ''}`}\n          onClick={() => setActiveTab('videos')}\n        >\n          Videos\n        </button>\n      </div>\n\n      {/* Content based on active tab */}\n      {activeTab === 'posts' ? (\n        <div className=\"gallery\">\n          {posts && posts.map((pics) => (\n            <img\n              key={pics._id}\n              src={pics.photo}\n              className=\"item\"\n              alt=\"\"\n              onClick={() => toggleDetails(pics)}\n            />\n          ))}\n        </div>\n      ) : (\n        <div className=\"videos-grid\">\n          {videos && videos.map((video) => (\n            <VideoCard\n              key={video._id}\n              video={video}\n              onVideoUpdate={handleVideoUpdate}\n            />\n          ))}\n        </div>\n      )}\n      {show && <PostDetail item={pic} toggleDetails={toggleDetails} />}\n\n      {/* Add ProfilePic modal */}\n      {showProfilePic && (\n        <ProfilePic changeprofile={handleProfilePicChange} />\n      )}\n    </div>\n  );\n} "],"mappings":"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"},"metadata":{},"sourceType":"module"}