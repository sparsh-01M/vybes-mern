{"ast":null,"code":"var _jsxFileName = \"/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/src/components/Reels.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { FaHeart, FaRegHeart, FaComment, FaEye } from 'react-icons/fa';\nimport './Reels.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Reels = () => {\n  _s();\n\n  const [reels, setReels] = useState([]);\n  const [currentReelIndex, setCurrentReelIndex] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const navigate = useNavigate();\n  const categories = [{\n    id: 'all',\n    name: 'All'\n  }, {\n    id: 'education',\n    name: 'Education'\n  }, {\n    id: 'business',\n    name: 'Business'\n  }, {\n    id: 'entertainment',\n    name: 'Entertainment'\n  }, {\n    id: 'sports-fitness',\n    name: 'Sports & Fitness'\n  }, {\n    id: 'gaming',\n    name: 'Gaming'\n  }, {\n    id: 'food-travel',\n    name: 'Food & Travel'\n  }];\n  useEffect(() => {\n    fetchReels();\n  }, [selectedCategory]);\n\n  const fetchReels = async () => {\n    try {\n      setLoading(true);\n      const endpoint = selectedCategory === 'all' ? '/api/reels/all' : `/api/reels/category/${selectedCategory}`;\n      const response = await axios.get(endpoint);\n      setReels(response.data);\n      setError(null);\n    } catch (err) {\n      setError('Failed to fetch reels');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleLike = async reelId => {\n    try {\n      const response = await axios.put('/api/reels/like', {\n        reelId\n      });\n      setReels(reels.map(reel => reel._id === reelId ? response.data : reel));\n    } catch (err) {\n      console.error('Error liking reel:', err);\n    }\n  };\n\n  const handleView = async reelId => {\n    try {\n      await axios.put(`/api/reels/view/${reelId}`);\n    } catch (err) {\n      console.error('Error updating view count:', err);\n    }\n  };\n\n  const handleScroll = direction => {\n    if (direction === 'up' && currentReelIndex > 0) {\n      setCurrentReelIndex(prev => prev - 1);\n    } else if (direction === 'down' && currentReelIndex < reels.length - 1) {\n      setCurrentReelIndex(prev => prev + 1);\n    }\n  };\n\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading\",\n    children: \"Loading reels...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"error\",\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 21\n  }, this);\n  if (reels.length === 0) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"no-reels\",\n    children: \"No reels found\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 34\n  }, this);\n  const currentReel = reels[currentReelIndex];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"reels-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"categories\",\n      children: categories.map(category => /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `category-btn ${selectedCategory === category.id ? 'active' : ''}`,\n        onClick: () => setSelectedCategory(category.id),\n        children: category.name\n      }, category.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"reel-player\",\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        src: currentReel.videoUrl,\n        loop: true,\n        autoPlay: true,\n        muted: true,\n        playsInline: true,\n        onWheel: e => handleScroll(e.deltaY > 0 ? 'down' : 'up'),\n        onEnded: () => handleView(currentReel._id)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"reel-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: currentReel.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: currentReel.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"reel-stats\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleLike(currentReel._id),\n            children: [currentReel.likes.includes(localStorage.getItem('userId')) ? /*#__PURE__*/_jsxDEV(FaHeart, {\n              className: \"liked\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(FaRegHeart, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: currentReel.likes.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            children: [/*#__PURE__*/_jsxDEV(FaComment, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: currentReel.comments.length\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"views\",\n            children: [/*#__PURE__*/_jsxDEV(FaEye, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: currentReel.views\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Reels, \"RaarCFGcHjeL+24FgTKP763cYBQ=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Reels;\nexport default Reels;\n\nvar _c;\n\n$RefreshReg$(_c, \"Reels\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","FaHeart","FaRegHeart","FaComment","FaEye","Reels","reels","setReels","currentReelIndex","setCurrentReelIndex","loading","setLoading","error","setError","selectedCategory","setSelectedCategory","navigate","categories","id","name","fetchReels","endpoint","response","get","data","err","console","handleLike","reelId","put","map","reel","_id","handleView","handleScroll","direction","prev","length","currentReel","category","videoUrl","e","deltaY","title","description","likes","includes","localStorage","getItem","comments","views"],"sources":["/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/src/components/Reels.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { FaHeart, FaRegHeart, FaComment, FaEye } from 'react-icons/fa';\nimport './Reels.css';\n\nconst Reels = () => {\n  const [reels, setReels] = useState([]);\n  const [currentReelIndex, setCurrentReelIndex] = useState(0);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const navigate = useNavigate();\n\n  const categories = [\n    { id: 'all', name: 'All' },\n    { id: 'education', name: 'Education' },\n    { id: 'business', name: 'Business' },\n    { id: 'entertainment', name: 'Entertainment' },\n    { id: 'sports-fitness', name: 'Sports & Fitness' },\n    { id: 'gaming', name: 'Gaming' },\n    { id: 'food-travel', name: 'Food & Travel' }\n  ];\n\n  useEffect(() => {\n    fetchReels();\n  }, [selectedCategory]);\n\n  const fetchReels = async () => {\n    try {\n      setLoading(true);\n      const endpoint = selectedCategory === 'all' \n        ? '/api/reels/all'\n        : `/api/reels/category/${selectedCategory}`;\n      \n      const response = await axios.get(endpoint);\n      setReels(response.data);\n      setError(null);\n    } catch (err) {\n      setError('Failed to fetch reels');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleLike = async (reelId) => {\n    try {\n      const response = await axios.put('/api/reels/like', { reelId });\n      setReels(reels.map(reel => \n        reel._id === reelId ? response.data : reel\n      ));\n    } catch (err) {\n      console.error('Error liking reel:', err);\n    }\n  };\n\n  const handleView = async (reelId) => {\n    try {\n      await axios.put(`/api/reels/view/${reelId}`);\n    } catch (err) {\n      console.error('Error updating view count:', err);\n    }\n  };\n\n  const handleScroll = (direction) => {\n    if (direction === 'up' && currentReelIndex > 0) {\n      setCurrentReelIndex(prev => prev - 1);\n    } else if (direction === 'down' && currentReelIndex < reels.length - 1) {\n      setCurrentReelIndex(prev => prev + 1);\n    }\n  };\n\n  if (loading) return <div className=\"loading\">Loading reels...</div>;\n  if (error) return <div className=\"error\">{error}</div>;\n  if (reels.length === 0) return <div className=\"no-reels\">No reels found</div>;\n\n  const currentReel = reels[currentReelIndex];\n\n  return (\n    <div className=\"reels-container\">\n      <div className=\"categories\">\n        {categories.map(category => (\n          <button\n            key={category.id}\n            className={`category-btn ${selectedCategory === category.id ? 'active' : ''}`}\n            onClick={() => setSelectedCategory(category.id)}\n          >\n            {category.name}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"reel-player\">\n        <video\n          src={currentReel.videoUrl}\n          loop\n          autoPlay\n          muted\n          playsInline\n          onWheel={(e) => handleScroll(e.deltaY > 0 ? 'down' : 'up')}\n          onEnded={() => handleView(currentReel._id)}\n        />\n        \n        <div className=\"reel-info\">\n          <h3>{currentReel.title}</h3>\n          <p>{currentReel.description}</p>\n          <div className=\"reel-stats\">\n            <button onClick={() => handleLike(currentReel._id)}>\n              {currentReel.likes.includes(localStorage.getItem('userId')) ? (\n                <FaHeart className=\"liked\" />\n              ) : (\n                <FaRegHeart />\n              )}\n              <span>{currentReel.likes.length}</span>\n            </button>\n            <button>\n              <FaComment />\n              <span>{currentReel.comments.length}</span>\n            </button>\n            <div className=\"views\">\n              <FaEye />\n              <span>{currentReel.views}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Reels;"],"mappings":"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"},"metadata":{},"sourceType":"module"}