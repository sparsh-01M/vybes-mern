{"ast":null,"code":"var _jsxFileName = \"/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/src/components/PostDetail.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from \"react\";\nimport \"./PostDetail.css\";\nimport { useNavigate, useLocation, Link } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { UserContext } from \"../context/UserContext\";\nimport config from \"../config/config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PostDetail(_ref) {\n  _s();\n\n  var _postData$postedBy3, _JSON$parse, _postData$postedBy4, _postData$postedBy5, _postData$postedBy7, _postData$postedBy8, _postData$postedBy10, _JSON$parse2, _postData$postedBy11, _postData$postedBy12, _postData$postedBy13, _JSON$parse3, _postData$comments, _postData$likes, _postData$likes2;\n\n  let {\n    item,\n    toggleDetails,\n    isProfilePage = false,\n    activeTab = 'posts'\n  } = _ref;\n  const navigate = useNavigate();\n  const location = useLocation();\n  const {\n    state\n  } = useContext(UserContext);\n  const defaultProfilePic = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";\n  const [postData, setPostData] = useState(item);\n  const [comment, setComment] = useState(\"\");\n  const [showDeleteModal, setShowDeleteModal] = useState(false); // Debug logs\n\n  useEffect(() => {\n    console.log(\"PostDetail mounted with item:\", {\n      postId: item === null || item === void 0 ? void 0 : item._id,\n      postedBy: item !== null && item !== void 0 && item.postedBy ? {\n        id: item.postedBy._id,\n        name: item.postedBy.name,\n        hasPhoto: !!item.postedBy.Photo,\n        photoUrl: item.postedBy.Photo\n      } : null\n    });\n  }, [item]); // Toast functions\n\n  const notifyA = msg => toast.error(msg);\n\n  const notifyB = msg => toast.success(msg); // Fetch post details if postedBy is not fully populated\n\n\n  useEffect(() => {\n    var _item$postedBy, _item$postedBy2;\n\n    if (item !== null && item !== void 0 && item._id && (!((_item$postedBy = item.postedBy) !== null && _item$postedBy !== void 0 && _item$postedBy.Photo) || !((_item$postedBy2 = item.postedBy) !== null && _item$postedBy2 !== void 0 && _item$postedBy2.name))) {\n      console.log(\"Fetching post details for post:\", item._id);\n      fetch(`${config.BACKEND_URL}/post/${item._id}`, {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n        }\n      }).then(res => res.json()).then(result => {\n        console.log(\"Fetched post details:\", {\n          postId: result._id,\n          postedBy: result.postedBy ? {\n            id: result.postedBy._id,\n            name: result.postedBy.name,\n            hasPhoto: !!result.postedBy.Photo,\n            photoUrl: result.postedBy.Photo\n          } : null\n        });\n        setPostData(result);\n      }).catch(err => {\n        console.error(\"Error fetching post details:\", err);\n      });\n    } else {\n      setPostData(item);\n    }\n  }, [item]);\n\n  const removePost = async postId => {\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/deletePost/${postId}`, {\n        method: \"delete\",\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n        }\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to delete post');\n      }\n\n      toast.success(\"Post deleted successfully\");\n      toggleDetails();\n    } catch (error) {\n      console.error(\"Error deleting post:\", error);\n      toast.error(\"Failed to delete post\");\n    } finally {\n      setShowDeleteModal(false);\n    }\n  };\n\n  const handleProfileClick = () => {\n    var _postData$postedBy;\n\n    const currentUser = JSON.parse(localStorage.getItem(\"user\"));\n\n    if (((_postData$postedBy = postData.postedBy) === null || _postData$postedBy === void 0 ? void 0 : _postData$postedBy._id) === (currentUser === null || currentUser === void 0 ? void 0 : currentUser._id)) {\n      // If it's the current user's profile, just close the modal\n      // The Link component will handle the navigation\n      toggleDetails();\n    } else {\n      var _postData$postedBy2;\n\n      // If it's another user's profile\n      navigate(`/profile/${(_postData$postedBy2 = postData.postedBy) === null || _postData$postedBy2 === void 0 ? void 0 : _postData$postedBy2._id}`);\n      toggleDetails();\n    }\n  };\n\n  const handleCommenterClick = commenterId => {\n    const currentUser = JSON.parse(localStorage.getItem(\"user\"));\n\n    if (commenterId === (currentUser === null || currentUser === void 0 ? void 0 : currentUser._id)) {\n      // If clicking on your own comment, just close the modal\n      // The Link component will handle the navigation\n      toggleDetails();\n    } else {\n      // If clicking on another user's comment\n      navigate(`/profile/${commenterId}`);\n      toggleDetails();\n    }\n  };\n\n  const makeComment = async text => {\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/comment`, {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n        },\n        body: JSON.stringify({\n          postId: item._id,\n          text: text\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to add comment');\n      }\n\n      const data = await response.json();\n      console.log(data);\n      setComment(\"\");\n      toast.success(\"Comment added successfully\"); // Refresh the post details\n\n      toggleDetails();\n    } catch (error) {\n      console.error(\"Error adding comment:\", error);\n      toast.error(\"Failed to add comment\");\n    }\n  };\n\n  const likePost = async id => {\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/like`, {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n        },\n        body: JSON.stringify({\n          postId: id\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to like post');\n      }\n\n      const data = await response.json();\n      console.log(data);\n      toast.success(\"Post liked successfully\"); // Refresh the post details\n\n      toggleDetails();\n    } catch (error) {\n      console.error(\"Error liking post:\", error);\n      toast.error(\"Failed to like post\");\n    }\n  };\n\n  const unlikePost = async id => {\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/unlike`, {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n        },\n        body: JSON.stringify({\n          postId: id\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to unlike post');\n      }\n\n      const data = await response.json();\n      console.log(data);\n      toast.success(\"Post unliked successfully\"); // Refresh the post details\n\n      toggleDetails();\n    } catch (error) {\n      console.error(\"Error unliking post:\", error);\n      toast.error(\"Failed to unlike post\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"showComment\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"postPic\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: postData.photo,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"details\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-header\",\n          style: {\n            borderBottom: \"1px solid #00000029\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-pic\",\n            style: {\n              cursor: 'pointer'\n            },\n            children: ((_postData$postedBy3 = postData.postedBy) === null || _postData$postedBy3 === void 0 ? void 0 : _postData$postedBy3._id) === ((_JSON$parse = JSON.parse(localStorage.getItem(\"user\"))) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse._id) ? /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/profile\",\n              onClick: toggleDetails,\n              style: {\n                textDecoration: 'none',\n                color: 'inherit'\n              },\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: ((_postData$postedBy4 = postData.postedBy) === null || _postData$postedBy4 === void 0 ? void 0 : _postData$postedBy4.Photo) || defaultProfilePic,\n                alt: ((_postData$postedBy5 = postData.postedBy) === null || _postData$postedBy5 === void 0 ? void 0 : _postData$postedBy5.name) || \"User\",\n                onError: e => {\n                  var _postData$postedBy6;\n\n                  console.log(\"Error loading profile picture:\", {\n                    user: postData.postedBy,\n                    attemptedUrl: (_postData$postedBy6 = postData.postedBy) === null || _postData$postedBy6 === void 0 ? void 0 : _postData$postedBy6.Photo,\n                    error: e\n                  });\n                  e.target.src = defaultProfilePic;\n                },\n                style: {\n                  width: \"40px\",\n                  height: \"40px\",\n                  borderRadius: \"50%\",\n                  objectFit: \"cover\",\n                  border: \"1px solid #eee\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n              src: ((_postData$postedBy7 = postData.postedBy) === null || _postData$postedBy7 === void 0 ? void 0 : _postData$postedBy7.Photo) || defaultProfilePic,\n              alt: ((_postData$postedBy8 = postData.postedBy) === null || _postData$postedBy8 === void 0 ? void 0 : _postData$postedBy8.name) || \"User\",\n              onClick: handleProfileClick,\n              onError: e => {\n                var _postData$postedBy9;\n\n                console.log(\"Error loading profile picture:\", {\n                  user: postData.postedBy,\n                  attemptedUrl: (_postData$postedBy9 = postData.postedBy) === null || _postData$postedBy9 === void 0 ? void 0 : _postData$postedBy9.Photo,\n                  error: e\n                });\n                e.target.src = defaultProfilePic;\n              },\n              style: {\n                width: \"40px\",\n                height: \"40px\",\n                borderRadius: \"50%\",\n                objectFit: \"cover\",\n                border: \"1px solid #eee\"\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 213,\n            columnNumber: 13\n          }, this), ((_postData$postedBy10 = postData.postedBy) === null || _postData$postedBy10 === void 0 ? void 0 : _postData$postedBy10._id) === ((_JSON$parse2 = JSON.parse(localStorage.getItem(\"user\"))) === null || _JSON$parse2 === void 0 ? void 0 : _JSON$parse2._id) ? /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/profile\",\n            onClick: toggleDetails,\n            style: {\n              textDecoration: 'none',\n              color: 'inherit'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"h5\", {\n              style: {\n                cursor: 'pointer'\n              },\n              children: ((_postData$postedBy11 = postData.postedBy) === null || _postData$postedBy11 === void 0 ? void 0 : _postData$postedBy11.name) || \"User\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"h5\", {\n            onClick: handleProfileClick,\n            style: {\n              cursor: 'pointer'\n            },\n            children: ((_postData$postedBy12 = postData.postedBy) === null || _postData$postedBy12 === void 0 ? void 0 : _postData$postedBy12.name) || \"User\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 15\n          }, this), ((_postData$postedBy13 = postData.postedBy) === null || _postData$postedBy13 === void 0 ? void 0 : _postData$postedBy13._id) === ((_JSON$parse3 = JSON.parse(localStorage.getItem(\"user\"))) === null || _JSON$parse3 === void 0 ? void 0 : _JSON$parse3._id) && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"deletePost\",\n            onClick: () => {\n              setShowDeleteModal(true);\n            },\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"material-symbols-outlined\",\n              children: \"delete\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"comment-section\",\n          style: {\n            borderBottom: \"1px solid #00000029\"\n          },\n          children: (_postData$comments = postData.comments) === null || _postData$comments === void 0 ? void 0 : _postData$comments.map(comment => {\n            var _comment$postedBy, _JSON$parse4, _comment$postedBy2, _comment$postedBy3, _comment$postedBy5, _comment$postedBy6, _comment$postedBy9, _JSON$parse5, _comment$postedBy10, _comment$postedBy12;\n\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"comment-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"comment-pic\",\n                style: {\n                  cursor: 'pointer'\n                },\n                children: ((_comment$postedBy = comment.postedBy) === null || _comment$postedBy === void 0 ? void 0 : _comment$postedBy._id) === ((_JSON$parse4 = JSON.parse(localStorage.getItem(\"user\"))) === null || _JSON$parse4 === void 0 ? void 0 : _JSON$parse4._id) ? /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/profile\",\n                  onClick: toggleDetails,\n                  style: {\n                    textDecoration: 'none',\n                    color: 'inherit'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: ((_comment$postedBy2 = comment.postedBy) === null || _comment$postedBy2 === void 0 ? void 0 : _comment$postedBy2.Photo) || defaultProfilePic,\n                    alt: ((_comment$postedBy3 = comment.postedBy) === null || _comment$postedBy3 === void 0 ? void 0 : _comment$postedBy3.name) || \"User\",\n                    onError: e => {\n                      var _comment$postedBy4;\n\n                      console.log(\"Error loading commenter profile picture:\", {\n                        user: comment.postedBy,\n                        attemptedUrl: (_comment$postedBy4 = comment.postedBy) === null || _comment$postedBy4 === void 0 ? void 0 : _comment$postedBy4.Photo,\n                        error: e\n                      });\n                      e.target.src = defaultProfilePic;\n                    },\n                    style: {\n                      width: \"24px\",\n                      height: \"24px\",\n                      borderRadius: \"50%\",\n                      objectFit: \"cover\",\n                      border: \"1px solid #eee\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 301,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: ((_comment$postedBy5 = comment.postedBy) === null || _comment$postedBy5 === void 0 ? void 0 : _comment$postedBy5.Photo) || defaultProfilePic,\n                  alt: ((_comment$postedBy6 = comment.postedBy) === null || _comment$postedBy6 === void 0 ? void 0 : _comment$postedBy6.name) || \"User\",\n                  onClick: () => {\n                    var _comment$postedBy7;\n\n                    return handleCommenterClick((_comment$postedBy7 = comment.postedBy) === null || _comment$postedBy7 === void 0 ? void 0 : _comment$postedBy7._id);\n                  },\n                  onError: e => {\n                    var _comment$postedBy8;\n\n                    console.log(\"Error loading commenter profile picture:\", {\n                      user: comment.postedBy,\n                      attemptedUrl: (_comment$postedBy8 = comment.postedBy) === null || _comment$postedBy8 === void 0 ? void 0 : _comment$postedBy8.Photo,\n                      error: e\n                    });\n                    e.target.src = defaultProfilePic;\n                  },\n                  style: {\n                    width: \"24px\",\n                    height: \"24px\",\n                    borderRadius: \"50%\",\n                    objectFit: \"cover\",\n                    border: \"1px solid #eee\"\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"comm\",\n                children: [((_comment$postedBy9 = comment.postedBy) === null || _comment$postedBy9 === void 0 ? void 0 : _comment$postedBy9._id) === ((_JSON$parse5 = JSON.parse(localStorage.getItem(\"user\"))) === null || _JSON$parse5 === void 0 ? void 0 : _JSON$parse5._id) ? /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/profile\",\n                  onClick: toggleDetails,\n                  style: {\n                    textDecoration: 'none',\n                    color: 'inherit'\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"commenter\",\n                    style: {\n                      fontWeight: \"bolder\",\n                      cursor: 'pointer'\n                    },\n                    children: [((_comment$postedBy10 = comment.postedBy) === null || _comment$postedBy10 === void 0 ? void 0 : _comment$postedBy10.name) || \"User\", \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 347,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"commenter\",\n                  style: {\n                    fontWeight: \"bolder\",\n                    cursor: 'pointer'\n                  },\n                  onClick: () => {\n                    var _comment$postedBy11;\n\n                    return handleCommenterClick((_comment$postedBy11 = comment.postedBy) === null || _comment$postedBy11 === void 0 ? void 0 : _comment$postedBy11._id);\n                  },\n                  children: [((_comment$postedBy12 = comment.postedBy) === null || _comment$postedBy12 === void 0 ? void 0 : _comment$postedBy12.name) || \"User\", \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"commentText\",\n                  children: comment.comment\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 17\n              }, this)]\n            }, comment._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 15\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: ((_postData$likes = postData.likes) === null || _postData$likes === void 0 ? void 0 : _postData$likes.length) || 0\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: postData.body\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 372,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add-comment\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"material-symbols-outlined\",\n            children: \"mood\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Add a comment\",\n            value: comment,\n            onChange: e => {\n              setComment(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"comment\",\n            onClick: () => {\n              if (comment.trim()) {\n                makeComment(comment);\n              }\n            },\n            children: \"Post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"post-actions\",\n          children: (_postData$likes2 = postData.likes) !== null && _postData$likes2 !== void 0 && _postData$likes2.includes(state === null || state === void 0 ? void 0 : state._id) ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => unlikePost(postData._id),\n            children: \"\\u2764\\uFE0F Unlike\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => likePost(postData._id),\n            children: \"\\uD83E\\uDD0D Like\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"close-comment\",\n      onClick: () => {\n        toggleDetails();\n      },\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"material-symbols-outlined material-symbols-outlined-comment\",\n        children: \"Close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 7\n    }, this), showDeleteModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Delete Post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Are you sure you want to delete this post? This action cannot be undone.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => removePost(postData._id),\n            className: \"delete-confirm\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowDeleteModal(false),\n            className: \"cancel\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PostDetail, \"i2sQEUtfZksm8PQVSnx/FMIVnBk=\", false, function () {\n  return [useNavigate, useLocation];\n});\n\n_c = PostDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostDetail\");","map":{"version":3,"names":["React","useEffect","useState","useContext","useNavigate","useLocation","Link","toast","UserContext","config","PostDetail","item","toggleDetails","isProfilePage","activeTab","navigate","location","state","defaultProfilePic","postData","setPostData","comment","setComment","showDeleteModal","setShowDeleteModal","console","log","postId","_id","postedBy","id","name","hasPhoto","Photo","photoUrl","notifyA","msg","error","notifyB","success","fetch","BACKEND_URL","headers","Authorization","localStorage","getItem","then","res","json","result","catch","err","removePost","response","method","ok","Error","handleProfileClick","currentUser","JSON","parse","handleCommenterClick","commenterId","makeComment","text","body","stringify","data","likePost","unlikePost","photo","borderBottom","cursor","textDecoration","color","e","user","attemptedUrl","target","src","width","height","borderRadius","objectFit","border","comments","map","fontWeight","likes","length","value","trim","includes"],"sources":["/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/src/components/PostDetail.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport \"./PostDetail.css\";\nimport { useNavigate, useLocation, Link } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { UserContext } from \"../context/UserContext\";\nimport config from \"../config/config\";\n\nexport default function PostDetail({ item, toggleDetails, isProfilePage = false, activeTab = 'posts' }) {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { state } = useContext(UserContext);\n  const defaultProfilePic = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";\n  const [postData, setPostData] = useState(item);\n  const [comment, setComment] = useState(\"\");\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n\n  // Debug logs\n  useEffect(() => {\n    console.log(\"PostDetail mounted with item:\", {\n      postId: item?._id,\n      postedBy: item?.postedBy ? {\n        id: item.postedBy._id,\n        name: item.postedBy.name,\n        hasPhoto: !!item.postedBy.Photo,\n        photoUrl: item.postedBy.Photo\n      } : null\n    });\n  }, [item]);\n\n  // Toast functions\n  const notifyA = (msg) => toast.error(msg);\n  const notifyB = (msg) => toast.success(msg);\n\n  // Fetch post details if postedBy is not fully populated\n  useEffect(() => {\n    if (item?._id && (!item.postedBy?.Photo || !item.postedBy?.name)) {\n      console.log(\"Fetching post details for post:\", item._id);\n      fetch(`${config.BACKEND_URL}/post/${item._id}`, {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        },\n      })\n        .then((res) => res.json())\n        .then((result) => {\n          console.log(\"Fetched post details:\", {\n            postId: result._id,\n            postedBy: result.postedBy ? {\n              id: result.postedBy._id,\n              name: result.postedBy.name,\n              hasPhoto: !!result.postedBy.Photo,\n              photoUrl: result.postedBy.Photo\n            } : null\n          });\n          setPostData(result);\n        })\n        .catch((err) => {\n          console.error(\"Error fetching post details:\", err);\n        });\n    } else {\n      setPostData(item);\n    }\n  }, [item]);\n\n  const removePost = async (postId) => {\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/deletePost/${postId}`, {\n        method: \"delete\",\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        },\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to delete post');\n      }\n\n      toast.success(\"Post deleted successfully\");\n      toggleDetails();\n    } catch (error) {\n      console.error(\"Error deleting post:\", error);\n      toast.error(\"Failed to delete post\");\n    } finally {\n      setShowDeleteModal(false);\n    }\n  };\n\n  const handleProfileClick = () => {\n    const currentUser = JSON.parse(localStorage.getItem(\"user\"));\n    \n    if (postData.postedBy?._id === currentUser?._id) {\n      // If it's the current user's profile, just close the modal\n      // The Link component will handle the navigation\n      toggleDetails();\n    } else {\n      // If it's another user's profile\n      navigate(`/profile/${postData.postedBy?._id}`);\n      toggleDetails();\n    }\n  };\n\n  const handleCommenterClick = (commenterId) => {\n    const currentUser = JSON.parse(localStorage.getItem(\"user\"));\n    \n    if (commenterId === currentUser?._id) {\n      // If clicking on your own comment, just close the modal\n      // The Link component will handle the navigation\n      toggleDetails();\n    } else {\n      // If clicking on another user's comment\n      navigate(`/profile/${commenterId}`);\n      toggleDetails();\n    }\n  };\n\n  const makeComment = async (text) => {\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/comment`, {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        },\n        body: JSON.stringify({\n          postId: item._id,\n          text: text,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to add comment');\n      }\n\n      const data = await response.json();\n      console.log(data);\n      setComment(\"\");\n      toast.success(\"Comment added successfully\");\n      // Refresh the post details\n      toggleDetails();\n    } catch (error) {\n      console.error(\"Error adding comment:\", error);\n      toast.error(\"Failed to add comment\");\n    }\n  };\n\n  const likePost = async (id) => {\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/like`, {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        },\n        body: JSON.stringify({\n          postId: id,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to like post');\n      }\n\n      const data = await response.json();\n      console.log(data);\n      toast.success(\"Post liked successfully\");\n      // Refresh the post details\n      toggleDetails();\n    } catch (error) {\n      console.error(\"Error liking post:\", error);\n      toast.error(\"Failed to like post\");\n    }\n  };\n\n  const unlikePost = async (id) => {\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/unlike`, {\n        method: \"put\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n        },\n        body: JSON.stringify({\n          postId: id,\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to unlike post');\n      }\n\n      const data = await response.json();\n      console.log(data);\n      toast.success(\"Post unliked successfully\");\n      // Refresh the post details\n      toggleDetails();\n    } catch (error) {\n      console.error(\"Error unliking post:\", error);\n      toast.error(\"Failed to unlike post\");\n    }\n  };\n\n  return (\n    <div className=\"showComment\">\n      <div className=\"container\">\n        <div className=\"postPic\">\n          <img src={postData.photo} alt=\"\" />\n        </div>\n        <div className=\"details\">\n          {/* card header */}\n          <div\n            className=\"card-header\"\n            style={{ borderBottom: \"1px solid #00000029\" }}\n          >\n            <div \n              className=\"card-pic\"\n              style={{ cursor: 'pointer' }}\n            >\n              {postData.postedBy?._id === JSON.parse(localStorage.getItem(\"user\"))?._id ? (\n                <Link to=\"/profile\" onClick={toggleDetails} style={{ textDecoration: 'none', color: 'inherit' }}>\n                  <img\n                    src={postData.postedBy?.Photo || defaultProfilePic}\n                    alt={postData.postedBy?.name || \"User\"}\n                    onError={(e) => {\n                      console.log(\"Error loading profile picture:\", {\n                        user: postData.postedBy,\n                        attemptedUrl: postData.postedBy?.Photo,\n                        error: e\n                      });\n                      e.target.src = defaultProfilePic;\n                    }}\n                    style={{ \n                      width: \"40px\", \n                      height: \"40px\", \n                      borderRadius: \"50%\", \n                      objectFit: \"cover\",\n                      border: \"1px solid #eee\"\n                    }}\n                  />\n                </Link>\n              ) : (\n                <img\n                  src={postData.postedBy?.Photo || defaultProfilePic}\n                  alt={postData.postedBy?.name || \"User\"}\n                  onClick={handleProfileClick}\n                  onError={(e) => {\n                    console.log(\"Error loading profile picture:\", {\n                      user: postData.postedBy,\n                      attemptedUrl: postData.postedBy?.Photo,\n                      error: e\n                    });\n                    e.target.src = defaultProfilePic;\n                  }}\n                  style={{ \n                    width: \"40px\", \n                    height: \"40px\", \n                    borderRadius: \"50%\", \n                    objectFit: \"cover\",\n                    border: \"1px solid #eee\"\n                  }}\n                />\n              )}\n            </div>\n            {postData.postedBy?._id === JSON.parse(localStorage.getItem(\"user\"))?._id ? (\n              <Link to=\"/profile\" onClick={toggleDetails} style={{ textDecoration: 'none', color: 'inherit' }}>\n                <h5 style={{ cursor: 'pointer' }}>\n                  {postData.postedBy?.name || \"User\"}\n                </h5>\n              </Link>\n            ) : (\n              <h5 \n                onClick={handleProfileClick}\n                style={{ cursor: 'pointer' }}\n              >\n                {postData.postedBy?.name || \"User\"}\n              </h5>\n            )}\n            {postData.postedBy?._id === JSON.parse(localStorage.getItem(\"user\"))?._id && (\n              <div\n                className=\"deletePost\"\n                onClick={() => {\n                  setShowDeleteModal(true);\n                }}\n              >\n                <span className=\"material-symbols-outlined\">delete</span>\n              </div>\n            )}\n          </div>\n\n          {/* commentSection */}\n          <div\n            className=\"comment-section\"\n            style={{ borderBottom: \"1px solid #00000029\" }}\n          >\n            {postData.comments?.map((comment) => (\n              <div className=\"comment-item\" key={comment._id}>\n                <div \n                  className=\"comment-pic\"\n                  style={{ cursor: 'pointer' }}\n                >\n                  {comment.postedBy?._id === JSON.parse(localStorage.getItem(\"user\"))?._id ? (\n                    <Link to=\"/profile\" onClick={toggleDetails} style={{ textDecoration: 'none', color: 'inherit' }}>\n                      <img\n                        src={comment.postedBy?.Photo || defaultProfilePic}\n                        alt={comment.postedBy?.name || \"User\"}\n                        onError={(e) => {\n                          console.log(\"Error loading commenter profile picture:\", {\n                            user: comment.postedBy,\n                            attemptedUrl: comment.postedBy?.Photo,\n                            error: e\n                          });\n                          e.target.src = defaultProfilePic;\n                        }}\n                        style={{ \n                          width: \"24px\", \n                          height: \"24px\", \n                          borderRadius: \"50%\", \n                          objectFit: \"cover\",\n                          border: \"1px solid #eee\"\n                        }}\n                      />\n                    </Link>\n                  ) : (\n                    <img\n                      src={comment.postedBy?.Photo || defaultProfilePic}\n                      alt={comment.postedBy?.name || \"User\"}\n                      onClick={() => handleCommenterClick(comment.postedBy?._id)}\n                      onError={(e) => {\n                        console.log(\"Error loading commenter profile picture:\", {\n                          user: comment.postedBy,\n                          attemptedUrl: comment.postedBy?.Photo,\n                          error: e\n                        });\n                        e.target.src = defaultProfilePic;\n                      }}\n                      style={{ \n                        width: \"24px\", \n                        height: \"24px\", \n                        borderRadius: \"50%\", \n                        objectFit: \"cover\",\n                        border: \"1px solid #eee\"\n                      }}\n                    />\n                  )}\n                </div>\n                <p className=\"comm\">\n                  {comment.postedBy?._id === JSON.parse(localStorage.getItem(\"user\"))?._id ? (\n                    <Link to=\"/profile\" onClick={toggleDetails} style={{ textDecoration: 'none', color: 'inherit' }}>\n                      <span \n                        className=\"commenter\" \n                        style={{ fontWeight: \"bolder\", cursor: 'pointer' }}\n                      >\n                        {comment.postedBy?.name || \"User\"}{\" \"}\n                      </span>\n                    </Link>\n                  ) : (\n                    <span \n                      className=\"commenter\" \n                      style={{ fontWeight: \"bolder\", cursor: 'pointer' }}\n                      onClick={() => handleCommenterClick(comment.postedBy?._id)}\n                    >\n                      {comment.postedBy?.name || \"User\"}{\" \"}\n                    </span>\n                  )}\n                  <span className=\"commentText\">{comment.comment}</span>\n                </p>\n              </div>\n            ))}\n          </div>\n\n          {/* card content */}\n          <div className=\"card-content\">\n            <p>{postData.likes?.length || 0}</p>\n            <p>{postData.body}</p>\n          </div>\n\n          {/* add Comment */}\n          <div className=\"add-comment\">\n            <span className=\"material-symbols-outlined\">mood</span>\n            <input\n              type=\"text\"\n              placeholder=\"Add a comment\"\n              value={comment}\n              onChange={(e) => {\n                setComment(e.target.value);\n              }}\n            />\n            <button\n              className=\"comment\"\n              onClick={() => {\n                if (comment.trim()) {\n                  makeComment(comment);\n                }\n              }}\n            >\n              Post\n            </button>\n          </div>\n\n          <div className=\"post-actions\">\n            {postData.likes?.includes(state?._id) ? (\n              <button onClick={() => unlikePost(postData._id)}>\n                ‚ù§Ô∏è Unlike\n              </button>\n            ) : (\n              <button onClick={() => likePost(postData._id)}>\n                ü§ç Like\n              </button>\n            )}\n          </div>\n        </div>\n      </div>\n      <div\n        className=\"close-comment\"\n        onClick={() => {\n          toggleDetails();\n        }}\n      >\n        <span className=\"material-symbols-outlined material-symbols-outlined-comment\">\n          Close\n        </span>\n      </div>\n\n      {showDeleteModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <h3>Delete Post</h3>\n            <p>Are you sure you want to delete this post? This action cannot be undone.</p>\n            <div className=\"modal-actions\">\n              <button onClick={() => removePost(postData._id)} className=\"delete-confirm\">\n                Delete\n              </button>\n              <button onClick={() => setShowDeleteModal(false)} className=\"cancel\">\n                Cancel\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}