{"ast":null,"code":"import { removeItem } from 'motion-utils';\nimport { microtask } from '../frameloop/microtask.mjs';\nimport { startViewAnimation } from './start.mjs';\nlet builders = [];\nlet current = null;\n\nfunction next() {\n  current = null;\n  const [nextBuilder] = builders;\n  if (nextBuilder) start(nextBuilder);\n}\n\nfunction start(builder) {\n  removeItem(builders, builder);\n  current = builder;\n  startViewAnimation(builder).then(animation => {\n    builder.notifyReady(animation);\n    animation.finished.finally(next);\n  });\n}\n\nfunction processQueue() {\n  /**\n   * Iterate backwards over the builders array. We can ignore the\n   * \"wait\" animations. If we have an interrupting animation in the\n   * queue then we need to batch all preceeding animations into it.\n   * Currently this only batches the update functions but will also\n   * need to batch the targets.\n   */\n  for (let i = builders.length - 1; i >= 0; i--) {\n    const builder = builders[i];\n    const {\n      interrupt\n    } = builder.options;\n\n    if (interrupt === \"immediate\") {\n      const batchedUpdates = builders.slice(0, i + 1).map(b => b.update);\n      const remaining = builders.slice(i + 1);\n\n      builder.update = () => {\n        batchedUpdates.forEach(update => update());\n      }; // Put the current builder at the front, followed by any \"wait\" builders\n\n\n      builders = [builder, ...remaining];\n      break;\n    }\n  }\n\n  if (!current || builders[0]?.options.interrupt === \"immediate\") {\n    next();\n  }\n}\n\nfunction addToQueue(builder) {\n  builders.push(builder);\n  microtask.render(processQueue);\n}\n\nexport { addToQueue };","map":{"version":3,"names":["removeItem","microtask","startViewAnimation","builders","current","next","nextBuilder","start","builder","then","animation","notifyReady","finished","finally","processQueue","i","length","interrupt","options","batchedUpdates","slice","map","b","update","remaining","forEach","addToQueue","push","render"],"sources":["/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/node_modules/motion-dom/dist/es/view/queue.mjs"],"sourcesContent":["import { removeItem } from 'motion-utils';\nimport { microtask } from '../frameloop/microtask.mjs';\nimport { startViewAnimation } from './start.mjs';\n\nlet builders = [];\nlet current = null;\nfunction next() {\n    current = null;\n    const [nextBuilder] = builders;\n    if (nextBuilder)\n        start(nextBuilder);\n}\nfunction start(builder) {\n    removeItem(builders, builder);\n    current = builder;\n    startViewAnimation(builder).then((animation) => {\n        builder.notifyReady(animation);\n        animation.finished.finally(next);\n    });\n}\nfunction processQueue() {\n    /**\n     * Iterate backwards over the builders array. We can ignore the\n     * \"wait\" animations. If we have an interrupting animation in the\n     * queue then we need to batch all preceeding animations into it.\n     * Currently this only batches the update functions but will also\n     * need to batch the targets.\n     */\n    for (let i = builders.length - 1; i >= 0; i--) {\n        const builder = builders[i];\n        const { interrupt } = builder.options;\n        if (interrupt === \"immediate\") {\n            const batchedUpdates = builders.slice(0, i + 1).map((b) => b.update);\n            const remaining = builders.slice(i + 1);\n            builder.update = () => {\n                batchedUpdates.forEach((update) => update());\n            };\n            // Put the current builder at the front, followed by any \"wait\" builders\n            builders = [builder, ...remaining];\n            break;\n        }\n    }\n    if (!current || builders[0]?.options.interrupt === \"immediate\") {\n        next();\n    }\n}\nfunction addToQueue(builder) {\n    builders.push(builder);\n    microtask.render(processQueue);\n}\n\nexport { addToQueue };\n"],"mappings":"AAAA,SAASA,UAAT,QAA2B,cAA3B;AACA,SAASC,SAAT,QAA0B,4BAA1B;AACA,SAASC,kBAAT,QAAmC,aAAnC;AAEA,IAAIC,QAAQ,GAAG,EAAf;AACA,IAAIC,OAAO,GAAG,IAAd;;AACA,SAASC,IAAT,GAAgB;EACZD,OAAO,GAAG,IAAV;EACA,MAAM,CAACE,WAAD,IAAgBH,QAAtB;EACA,IAAIG,WAAJ,EACIC,KAAK,CAACD,WAAD,CAAL;AACP;;AACD,SAASC,KAAT,CAAeC,OAAf,EAAwB;EACpBR,UAAU,CAACG,QAAD,EAAWK,OAAX,CAAV;EACAJ,OAAO,GAAGI,OAAV;EACAN,kBAAkB,CAACM,OAAD,CAAlB,CAA4BC,IAA5B,CAAkCC,SAAD,IAAe;IAC5CF,OAAO,CAACG,WAAR,CAAoBD,SAApB;IACAA,SAAS,CAACE,QAAV,CAAmBC,OAAnB,CAA2BR,IAA3B;EACH,CAHD;AAIH;;AACD,SAASS,YAAT,GAAwB;EACpB;AACJ;AACA;AACA;AACA;AACA;AACA;EACI,KAAK,IAAIC,CAAC,GAAGZ,QAAQ,CAACa,MAAT,GAAkB,CAA/B,EAAkCD,CAAC,IAAI,CAAvC,EAA0CA,CAAC,EAA3C,EAA+C;IAC3C,MAAMP,OAAO,GAAGL,QAAQ,CAACY,CAAD,CAAxB;IACA,MAAM;MAAEE;IAAF,IAAgBT,OAAO,CAACU,OAA9B;;IACA,IAAID,SAAS,KAAK,WAAlB,EAA+B;MAC3B,MAAME,cAAc,GAAGhB,QAAQ,CAACiB,KAAT,CAAe,CAAf,EAAkBL,CAAC,GAAG,CAAtB,EAAyBM,GAAzB,CAA8BC,CAAD,IAAOA,CAAC,CAACC,MAAtC,CAAvB;MACA,MAAMC,SAAS,GAAGrB,QAAQ,CAACiB,KAAT,CAAeL,CAAC,GAAG,CAAnB,CAAlB;;MACAP,OAAO,CAACe,MAAR,GAAiB,MAAM;QACnBJ,cAAc,CAACM,OAAf,CAAwBF,MAAD,IAAYA,MAAM,EAAzC;MACH,CAFD,CAH2B,CAM3B;;;MACApB,QAAQ,GAAG,CAACK,OAAD,EAAU,GAAGgB,SAAb,CAAX;MACA;IACH;EACJ;;EACD,IAAI,CAACpB,OAAD,IAAYD,QAAQ,CAAC,CAAD,CAAR,EAAae,OAAb,CAAqBD,SAArB,KAAmC,WAAnD,EAAgE;IAC5DZ,IAAI;EACP;AACJ;;AACD,SAASqB,UAAT,CAAoBlB,OAApB,EAA6B;EACzBL,QAAQ,CAACwB,IAAT,CAAcnB,OAAd;EACAP,SAAS,CAAC2B,MAAV,CAAiBd,YAAjB;AACH;;AAED,SAASY,UAAT"},"metadata":{},"sourceType":"module"}