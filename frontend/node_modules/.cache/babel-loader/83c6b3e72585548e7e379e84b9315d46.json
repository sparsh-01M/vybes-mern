{"ast":null,"code":"var _jsxFileName = \"/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/src/components/AIBot.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './AIBot.css';\nimport { toast } from 'react-toastify';\nimport ReactMarkdown from 'react-markdown';\nimport { LoginContext } from '../context/LoginContext';\nimport config from '../config/config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SUGGESTED_QUESTIONS = [\"What are the best practices for learning a new programming language?\", \"How can I improve my productivity while coding?\", \"Explain the concept of machine learning in simple terms\", \"What are the latest trends in web development?\", \"How can I start learning artificial intelligence?\"]; // Function to format text with proper styling\n\nconst formatMessage = text => {\n  // Replace markdown-style formatting with HTML\n  let formattedText = text // Bold text\n  .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>') // Italic text\n  .replace(/\\*(.*?)\\*/g, '<em>$1</em>') // Code blocks\n  .replace(/```([\\s\\S]*?)```/g, '<pre><code>$1</code></pre>') // Inline code\n  .replace(/`([^`]+)`/g, '<code>$1</code>') // Lists\n  .replace(/^\\s*[-*+]\\s+(.+)$/gm, '<li>$1</li>') // Headers\n  .replace(/^### (.*$)/gm, '<h3>$1</h3>').replace(/^## (.*$)/gm, '<h2>$1</h2>').replace(/^# (.*$)/gm, '<h1>$1</h1>') // Links\n  .replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\" target=\"_blank\" rel=\"noopener noreferrer\">$1</a>');\n  return formattedText;\n}; // Component for rendering formatted message content\n\n\nconst MessageContent = _ref => {\n  let {\n    content\n  } = _ref;\n  const formattedContent = formatMessage(content);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"message-content-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(ReactMarkdown, {\n      components: {\n        // Style different elements\n        p: _ref2 => {\n          let {\n            children\n          } = _ref2;\n          return /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"message-paragraph\",\n            children: children\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 32\n          }, this);\n        },\n        strong: _ref3 => {\n          let {\n            children\n          } = _ref3;\n          return /*#__PURE__*/_jsxDEV(\"strong\", {\n            className: \"message-bold\",\n            children: children\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 37\n          }, this);\n        },\n        em: _ref4 => {\n          let {\n            children\n          } = _ref4;\n          return /*#__PURE__*/_jsxDEV(\"em\", {\n            className: \"message-italic\",\n            children: children\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 33\n          }, this);\n        },\n        code: _ref5 => {\n          let {\n            children,\n            inline\n          } = _ref5;\n          return inline ? /*#__PURE__*/_jsxDEV(\"code\", {\n            className: \"message-inline-code\",\n            children: children\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"pre\", {\n            className: \"message-code-block\",\n            children: /*#__PURE__*/_jsxDEV(\"code\", {\n              children: children\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 51\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 15\n          }, this);\n        },\n        ul: _ref6 => {\n          let {\n            children\n          } = _ref6;\n          return /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"message-list\",\n            children: children\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 33\n          }, this);\n        },\n        ol: _ref7 => {\n          let {\n            children\n          } = _ref7;\n          return /*#__PURE__*/_jsxDEV(\"ol\", {\n            className: \"message-list\",\n            children: children\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 33\n          }, this);\n        },\n        li: _ref8 => {\n          let {\n            children\n          } = _ref8;\n          return /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"message-list-item\",\n            children: children\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 33\n          }, this);\n        },\n        h1: _ref9 => {\n          let {\n            children\n          } = _ref9;\n          return /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"message-heading message-h1\",\n            children: children\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 33\n          }, this);\n        },\n        h2: _ref10 => {\n          let {\n            children\n          } = _ref10;\n          return /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"message-heading message-h2\",\n            children: children\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 33\n          }, this);\n        },\n        h3: _ref11 => {\n          let {\n            children\n          } = _ref11;\n          return /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"message-heading message-h3\",\n            children: children\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 33\n          }, this);\n        },\n        a: _ref12 => {\n          let {\n            href,\n            children\n          } = _ref12;\n          return /*#__PURE__*/_jsxDEV(\"a\", {\n            href: href,\n            className: \"message-link\",\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            children: children\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this);\n        }\n      },\n      children: content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n\n_c = MessageContent;\n\nconst AIBot = () => {\n  _s();\n\n  var _JSON$parse;\n\n  const {\n    setUserLogin\n  } = useContext(LoginContext);\n  const navigate = useNavigate();\n  const [chats, setChats] = useState([]);\n  const [currentChat, setCurrentChat] = useState(null);\n  const [message, setMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [loadingChats, setLoadingChats] = useState(true);\n  const messagesEndRef = useRef(null);\n  const userId = (_JSON$parse = JSON.parse(localStorage.getItem('user'))) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse._id;\n  const [editingChatId, setEditingChatId] = useState(null);\n  const [editingTitle, setEditingTitle] = useState('');\n  const editInputRef = useRef(null);\n  const [newTitle, setNewTitle] = useState('');\n  useEffect(() => {\n    if (!userId) {\n      setUserLogin(false);\n      return;\n    }\n\n    fetchChats();\n  }, [userId]);\n\n  const fetchChats = async () => {\n    try {\n      setLoadingChats(true);\n      const response = await fetch(`${config.BACKEND_URL}/chats/${userId}`);\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch chats');\n      }\n\n      const data = await response.json();\n      setChats(data);\n    } catch (error) {\n      console.error('Error fetching chats:', error);\n      toast.error('Failed to load chats');\n    } finally {\n      setLoadingChats(false);\n    }\n  };\n\n  const fetchChat = async chatId => {\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/chat/${chatId}`);\n\n      if (!response.ok) {\n        throw new Error('Failed to fetch chat');\n      }\n\n      const data = await response.json();\n      setCurrentChat(data);\n    } catch (error) {\n      console.error('Error fetching chat:', error);\n      toast.error('Failed to load chat');\n    }\n  };\n\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [currentChat === null || currentChat === void 0 ? void 0 : currentChat.messages]);\n\n  const createNewChat = async () => {\n    if (!message.trim()) {\n      toast.error('Please enter a message');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/chat`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId,\n          message: message.trim()\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to create chat');\n      }\n\n      const newChat = await response.json();\n      setChats(prev => [newChat, ...prev]);\n      setCurrentChat(newChat);\n      setMessage('');\n      toast.success('Chat created successfully!');\n    } catch (error) {\n      console.error('Error creating chat:', error);\n      toast.error(error.message || 'Failed to create chat');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const sendMessage = async () => {\n    if (!message.trim() || !currentChat) {\n      toast.error('Please enter a message');\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/chat/${currentChat._id}/message`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message: message.trim()\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to send message');\n      }\n\n      const updatedChat = await response.json();\n      setCurrentChat(updatedChat);\n      setMessage(''); // Update the chat in the list\n\n      setChats(prev => prev.map(chat => chat._id === updatedChat._id ? updatedChat : chat));\n    } catch (error) {\n      console.error('Error sending message:', error);\n      toast.error(error.message || 'Failed to send message');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteChat = async chatId => {\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/chat/${chatId}`, {\n        method: 'DELETE'\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to delete chat');\n      }\n\n      setChats(prev => prev.filter(chat => chat._id !== chatId));\n\n      if ((currentChat === null || currentChat === void 0 ? void 0 : currentChat._id) === chatId) {\n        setCurrentChat(null);\n      }\n\n      toast.success('Chat deleted successfully!');\n    } catch (error) {\n      console.error('Error deleting chat:', error);\n      toast.error('Failed to delete chat');\n    }\n  };\n\n  const renameChat = async (chatId, newTitle) => {\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/chat/${chatId}/rename`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          title: newTitle.trim()\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to rename chat');\n      }\n\n      const updatedChat = await response.json();\n      setChats(prev => prev.map(chat => chat._id === chatId ? updatedChat : chat));\n\n      if ((currentChat === null || currentChat === void 0 ? void 0 : currentChat._id) === chatId) {\n        setCurrentChat(updatedChat);\n      }\n\n      setEditingTitle(null);\n      setNewTitle('');\n      toast.success('Chat renamed successfully!');\n    } catch (error) {\n      console.error('Error renaming chat:', error);\n      toast.error('Failed to rename chat');\n    }\n  };\n\n  const formatDate = dateString => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  if (!userId) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ai-bot-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-prompt\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Please log in to use AI Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"You need to be logged in to access the AI chat feature.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ai-bot-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-sidebar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sidebar-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"AI Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"new-chat-btn\",\n          onClick: () => {\n            setCurrentChat(null);\n            setMessage('');\n          },\n          children: \"+ New Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-list\",\n        children: loadingChats ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loading\",\n          children: \"Loading chats...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 13\n        }, this) : chats.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"no-chats\",\n          children: \"No chats yet. Start a new conversation!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this) : chats.map(chat => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `chat-item ${(currentChat === null || currentChat === void 0 ? void 0 : currentChat._id) === chat._id ? 'active' : ''}`,\n          onClick: () => fetchChat(chat._id),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-title\",\n            children: editingTitle === chat._id ? /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: newTitle,\n              onChange: e => setNewTitle(e.target.value),\n              onBlur: () => renameChat(chat._id, newTitle),\n              onKeyPress: e => {\n                if (e.key === 'Enter') {\n                  renameChat(chat._id, newTitle);\n                }\n              },\n              autoFocus: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              children: chat.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-date\",\n            children: formatDate(chat.updatedAt)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"rename-btn\",\n              onClick: e => {\n                e.stopPropagation();\n                setEditingTitle(chat._id);\n                setNewTitle(chat.title);\n              },\n              children: \"\\u270F\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"delete-btn\",\n              onClick: e => {\n                e.stopPropagation();\n                deleteChat(chat._id);\n              },\n              children: \"\\uD83D\\uDDD1\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 346,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 17\n          }, this)]\n        }, chat._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-main\",\n      children: currentChat ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-messages\",\n          children: [currentChat.messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `message ${msg.role === 'user' ? 'user' : 'assistant'}`,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-role\",\n                children: msg.role === 'user' ? 'You' : 'AI Assistant'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-text\",\n                children: msg.content\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 375,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-time\",\n                children: formatDate(msg.timestamp)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 19\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 17\n          }, this)), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message assistant\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-role\",\n                children: \"AI Assistant\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 385,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-text typing\",\n                children: \"AI is thinking...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 386,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-input\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: message,\n            onChange: e => setMessage(e.target.value),\n            onKeyPress: e => {\n              if (e.key === 'Enter' && !loading) {\n                sendMessage();\n              }\n            },\n            placeholder: \"Type your message...\",\n            disabled: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: sendMessage,\n            disabled: loading || !message.trim(),\n            children: loading ? 'Sending...' : 'Send'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 404,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"welcome-screen\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Welcome to AI Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Start a conversation with our AI assistant. Ask questions, get help, or just chat!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"new-chat-input\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: message,\n            onChange: e => setMessage(e.target.value),\n            onKeyPress: e => {\n              if (e.key === 'Enter' && !loading) {\n                createNewChat();\n              }\n            },\n            placeholder: \"What would you like to talk about?\",\n            disabled: loading\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: createNewChat,\n            disabled: loading || !message.trim(),\n            children: loading ? 'Creating...' : 'Start Chat'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 289,\n    columnNumber: 5\n  }, this);\n};\n\n_s(AIBot, \"YPJpCdVwxbUGYofYze7blvq9hIs=\", false, function () {\n  return [useNavigate];\n});\n\n_c2 = AIBot;\nexport default AIBot;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"MessageContent\");\n$RefreshReg$(_c2, \"AIBot\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useContext","useNavigate","toast","ReactMarkdown","LoginContext","config","SUGGESTED_QUESTIONS","formatMessage","text","formattedText","replace","MessageContent","content","formattedContent","p","children","strong","em","code","inline","ul","ol","li","h1","h2","h3","a","href","AIBot","setUserLogin","navigate","chats","setChats","currentChat","setCurrentChat","message","setMessage","loading","setLoading","loadingChats","setLoadingChats","messagesEndRef","userId","JSON","parse","localStorage","getItem","_id","editingChatId","setEditingChatId","editingTitle","setEditingTitle","editInputRef","newTitle","setNewTitle","fetchChats","response","fetch","BACKEND_URL","ok","Error","data","json","error","console","fetchChat","chatId","scrollToBottom","current","scrollIntoView","behavior","messages","createNewChat","trim","method","headers","body","stringify","errorData","newChat","prev","success","sendMessage","updatedChat","map","chat","deleteChat","filter","renameChat","title","formatDate","dateString","date","Date","toLocaleDateString","toLocaleTimeString","hour","minute","length","e","target","value","key","updatedAt","stopPropagation","msg","index","role","timestamp"],"sources":["/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/src/components/AIBot.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport './AIBot.css';\nimport { toast } from 'react-toastify';\nimport ReactMarkdown from 'react-markdown';\nimport { LoginContext } from '../context/LoginContext';\nimport config from '../config/config';\n\nconst SUGGESTED_QUESTIONS = [\n  \"What are the best practices for learning a new programming language?\",\n  \"How can I improve my productivity while coding?\",\n  \"Explain the concept of machine learning in simple terms\",\n  \"What are the latest trends in web development?\",\n  \"How can I start learning artificial intelligence?\"\n];\n\n// Function to format text with proper styling\nconst formatMessage = (text) => {\n  // Replace markdown-style formatting with HTML\n  let formattedText = text\n    // Bold text\n    .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n    // Italic text\n    .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n    // Code blocks\n    .replace(/```([\\s\\S]*?)```/g, '<pre><code>$1</code></pre>')\n    // Inline code\n    .replace(/`([^`]+)`/g, '<code>$1</code>')\n    // Lists\n    .replace(/^\\s*[-*+]\\s+(.+)$/gm, '<li>$1</li>')\n    // Headers\n    .replace(/^### (.*$)/gm, '<h3>$1</h3>')\n    .replace(/^## (.*$)/gm, '<h2>$1</h2>')\n    .replace(/^# (.*$)/gm, '<h1>$1</h1>')\n    // Links\n    .replace(/\\[([^\\]]+)\\]\\(([^)]+)\\)/g, '<a href=\"$2\" target=\"_blank\" rel=\"noopener noreferrer\">$1</a>');\n\n  return formattedText;\n};\n\n// Component for rendering formatted message content\nconst MessageContent = ({ content }) => {\n  const formattedContent = formatMessage(content);\n  \n  return (\n    <div className=\"message-content-wrapper\">\n      <ReactMarkdown\n        components={{\n          // Style different elements\n          p: ({ children }) => <p className=\"message-paragraph\">{children}</p>,\n          strong: ({ children }) => <strong className=\"message-bold\">{children}</strong>,\n          em: ({ children }) => <em className=\"message-italic\">{children}</em>,\n          code: ({ children, inline }) => \n            inline ? \n              <code className=\"message-inline-code\">{children}</code> : \n              <pre className=\"message-code-block\"><code>{children}</code></pre>,\n          ul: ({ children }) => <ul className=\"message-list\">{children}</ul>,\n          ol: ({ children }) => <ol className=\"message-list\">{children}</ol>,\n          li: ({ children }) => <li className=\"message-list-item\">{children}</li>,\n          h1: ({ children }) => <h1 className=\"message-heading message-h1\">{children}</h1>,\n          h2: ({ children }) => <h2 className=\"message-heading message-h2\">{children}</h2>,\n          h3: ({ children }) => <h3 className=\"message-heading message-h3\">{children}</h3>,\n          a: ({ href, children }) => (\n            <a \n              href={href} \n              className=\"message-link\" \n              target=\"_blank\" \n              rel=\"noopener noreferrer\"\n            >\n              {children}\n            </a>\n          ),\n        }}\n      >\n        {content}\n      </ReactMarkdown>\n    </div>\n  );\n};\n\nconst AIBot = () => {\n  const { setUserLogin } = useContext(LoginContext);\n  const navigate = useNavigate();\n  const [chats, setChats] = useState([]);\n  const [currentChat, setCurrentChat] = useState(null);\n  const [message, setMessage] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [loadingChats, setLoadingChats] = useState(true);\n  const messagesEndRef = useRef(null);\n  const userId = JSON.parse(localStorage.getItem('user'))?._id;\n  const [editingChatId, setEditingChatId] = useState(null);\n  const [editingTitle, setEditingTitle] = useState('');\n  const editInputRef = useRef(null);\n  const [newTitle, setNewTitle] = useState('');\n\n  useEffect(() => {\n    if (!userId) {\n      setUserLogin(false);\n      return;\n    }\n    fetchChats();\n  }, [userId]);\n\n  const fetchChats = async () => {\n    try {\n      setLoadingChats(true);\n      const response = await fetch(`${config.BACKEND_URL}/chats/${userId}`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch chats');\n      }\n      const data = await response.json();\n      setChats(data);\n    } catch (error) {\n      console.error('Error fetching chats:', error);\n      toast.error('Failed to load chats');\n    } finally {\n      setLoadingChats(false);\n    }\n  };\n\n  const fetchChat = async (chatId) => {\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/chat/${chatId}`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch chat');\n      }\n      const data = await response.json();\n      setCurrentChat(data);\n    } catch (error) {\n      console.error('Error fetching chat:', error);\n      toast.error('Failed to load chat');\n    }\n  };\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [currentChat?.messages]);\n\n  const createNewChat = async () => {\n    if (!message.trim()) {\n      toast.error('Please enter a message');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/chat`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          userId,\n          message: message.trim()\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to create chat');\n      }\n\n      const newChat = await response.json();\n      setChats(prev => [newChat, ...prev]);\n      setCurrentChat(newChat);\n      setMessage('');\n      toast.success('Chat created successfully!');\n    } catch (error) {\n      console.error('Error creating chat:', error);\n      toast.error(error.message || 'Failed to create chat');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const sendMessage = async () => {\n    if (!message.trim() || !currentChat) {\n      toast.error('Please enter a message');\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/chat/${currentChat._id}/message`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          message: message.trim()\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || 'Failed to send message');\n      }\n\n      const updatedChat = await response.json();\n      setCurrentChat(updatedChat);\n      setMessage('');\n      \n      // Update the chat in the list\n      setChats(prev => prev.map(chat => \n        chat._id === updatedChat._id ? updatedChat : chat\n      ));\n    } catch (error) {\n      console.error('Error sending message:', error);\n      toast.error(error.message || 'Failed to send message');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deleteChat = async (chatId) => {\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/chat/${chatId}`, {\n        method: 'DELETE',\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to delete chat');\n      }\n\n      setChats(prev => prev.filter(chat => chat._id !== chatId));\n      if (currentChat?._id === chatId) {\n        setCurrentChat(null);\n      }\n      toast.success('Chat deleted successfully!');\n    } catch (error) {\n      console.error('Error deleting chat:', error);\n      toast.error('Failed to delete chat');\n    }\n  };\n\n  const renameChat = async (chatId, newTitle) => {\n    try {\n      const response = await fetch(`${config.BACKEND_URL}/chat/${chatId}/rename`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          title: newTitle.trim()\n        })\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to rename chat');\n      }\n\n      const updatedChat = await response.json();\n      setChats(prev => prev.map(chat => \n        chat._id === chatId ? updatedChat : chat\n      ));\n      if (currentChat?._id === chatId) {\n        setCurrentChat(updatedChat);\n      }\n      setEditingTitle(null);\n      setNewTitle('');\n      toast.success('Chat renamed successfully!');\n    } catch (error) {\n      console.error('Error renaming chat:', error);\n      toast.error('Failed to rename chat');\n    }\n  };\n\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString() + ' ' + date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\n  };\n\n  if (!userId) {\n    return (\n      <div className=\"ai-bot-container\">\n        <div className=\"login-prompt\">\n          <h2>Please log in to use AI Chat</h2>\n          <p>You need to be logged in to access the AI chat feature.</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"ai-bot-container\">\n      <div className=\"chat-sidebar\">\n        <div className=\"sidebar-header\">\n          <h2>AI Chat</h2>\n          <button \n            className=\"new-chat-btn\"\n            onClick={() => {\n              setCurrentChat(null);\n              setMessage('');\n            }}\n          >\n            + New Chat\n          </button>\n        </div>\n\n        <div className=\"chat-list\">\n          {loadingChats ? (\n            <div className=\"loading\">Loading chats...</div>\n          ) : chats.length === 0 ? (\n            <div className=\"no-chats\">No chats yet. Start a new conversation!</div>\n          ) : (\n            chats.map(chat => (\n              <div \n                key={chat._id} \n                className={`chat-item ${currentChat?._id === chat._id ? 'active' : ''}`}\n                onClick={() => fetchChat(chat._id)}\n              >\n                <div className=\"chat-title\">\n                  {editingTitle === chat._id ? (\n                    <input\n                      type=\"text\"\n                      value={newTitle}\n                      onChange={(e) => setNewTitle(e.target.value)}\n                      onBlur={() => renameChat(chat._id, newTitle)}\n                      onKeyPress={(e) => {\n                        if (e.key === 'Enter') {\n                          renameChat(chat._id, newTitle);\n                        }\n                      }}\n                      autoFocus\n                    />\n                  ) : (\n                    <span>{chat.title}</span>\n                  )}\n                </div>\n                <div className=\"chat-date\">{formatDate(chat.updatedAt)}</div>\n                <div className=\"chat-actions\">\n                  <button \n                    className=\"rename-btn\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      setEditingTitle(chat._id);\n                      setNewTitle(chat.title);\n                    }}\n                  >\n                    ‚úèÔ∏è\n                  </button>\n                  <button \n                    className=\"delete-btn\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      deleteChat(chat._id);\n                    }}\n                  >\n                    üóëÔ∏è\n                  </button>\n                </div>\n              </div>\n            ))\n          )}\n        </div>\n      </div>\n\n      <div className=\"chat-main\">\n        {currentChat ? (\n          <>\n            <div className=\"chat-messages\">\n              {currentChat.messages.map((msg, index) => (\n                <div \n                  key={index} \n                  className={`message ${msg.role === 'user' ? 'user' : 'assistant'}`}\n                >\n                  <div className=\"message-content\">\n                    <div className=\"message-role\">\n                      {msg.role === 'user' ? 'You' : 'AI Assistant'}\n                    </div>\n                    <div className=\"message-text\">{msg.content}</div>\n                    <div className=\"message-time\">\n                      {formatDate(msg.timestamp)}\n                    </div>\n                  </div>\n                </div>\n              ))}\n              {loading && (\n                <div className=\"message assistant\">\n                  <div className=\"message-content\">\n                    <div className=\"message-role\">AI Assistant</div>\n                    <div className=\"message-text typing\">AI is thinking...</div>\n                  </div>\n                </div>\n              )}\n            </div>\n            <div className=\"chat-input\">\n              <input\n                type=\"text\"\n                value={message}\n                onChange={(e) => setMessage(e.target.value)}\n                onKeyPress={(e) => {\n                  if (e.key === 'Enter' && !loading) {\n                    sendMessage();\n                  }\n                }}\n                placeholder=\"Type your message...\"\n                disabled={loading}\n              />\n              <button \n                onClick={sendMessage}\n                disabled={loading || !message.trim()}\n              >\n                {loading ? 'Sending...' : 'Send'}\n              </button>\n            </div>\n          </>\n        ) : (\n          <div className=\"welcome-screen\">\n            <h1>Welcome to AI Chat</h1>\n            <p>Start a conversation with our AI assistant. Ask questions, get help, or just chat!</p>\n            <div className=\"new-chat-input\">\n              <input\n                type=\"text\"\n                value={message}\n                onChange={(e) => setMessage(e.target.value)}\n                onKeyPress={(e) => {\n                  if (e.key === 'Enter' && !loading) {\n                    createNewChat();\n                  }\n                }}\n                placeholder=\"What would you like to talk about?\"\n                disabled={loading}\n              />\n              <button \n                onClick={createNewChat}\n                disabled={loading || !message.trim()}\n              >\n                {loading ? 'Creating...' : 'Start Chat'}\n              </button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AIBot; "],"mappings":"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"},"metadata":{},"sourceType":"module"}