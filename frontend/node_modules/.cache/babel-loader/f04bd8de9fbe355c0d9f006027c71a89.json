{"ast":null,"code":"var _jsxFileName = \"/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/src/components/MyFollowingPost.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport \"./Home.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MyFolliwngPost() {\n  _s();\n\n  var _JSON$parse;\n\n  const navigate = useNavigate();\n  const [followedUsers, setFollowedUsers] = useState([]);\n  const defaultProfilePic = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\"; // Get current user's ID from localStorage\n\n  const currentUserId = (_JSON$parse = JSON.parse(localStorage.getItem(\"user\"))) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse._id; // Handle profile click\n\n  const handleProfileClick = userId => {\n    if (userId === currentUserId) {\n      navigate(\"/profile\");\n    } else {\n      navigate(`/profile/${userId}`);\n    }\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"jwt\");\n\n    if (!token) {\n      navigate(\"./signup\");\n    } // Get current user data for debugging\n\n\n    const currentUser = JSON.parse(localStorage.getItem(\"user\"));\n    console.log(\"Current user data:\", currentUser); // Fetching followed users\n\n    fetch(\"http://localhost:4000/myfollwingpost\", {\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n      }\n    }).then(res => res.json()).then(result => {\n      console.log(\"Raw API response:\", result); // If result is an array of posts, extract unique users\n\n      if (Array.isArray(result)) {\n        const uniqueUsers = result.reduce((acc, post) => {\n          if (post.postedBy && !acc.some(user => user._id === post.postedBy._id)) {\n            acc.push({\n              _id: post.postedBy._id,\n              name: post.postedBy.name,\n              Photo: post.postedBy.Photo\n            });\n          }\n\n          return acc;\n        }, []);\n        console.log(\"Extracted unique users:\", uniqueUsers);\n        setFollowedUsers(uniqueUsers);\n      } else {\n        console.log(\"Unexpected API response format:\", result);\n        setFollowedUsers([]);\n      }\n    }).catch(err => {\n      console.error(\"Error fetching followed users:\", err);\n      setFollowedUsers([]);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        textAlign: 'center',\n        marginBottom: '20px'\n      },\n      children: \"People You Follow\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), followedUsers.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        padding: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"No followed users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Start following people to see their profiles here!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"followed-users-grid\",\n      children: followedUsers.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-card\",\n        onClick: () => handleProfileClick(user._id),\n        style: {\n          cursor: 'pointer'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-profile\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-pic\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: user.Photo || defaultProfilePic,\n              alt: user.name,\n              onError: e => {\n                console.log(\"Error loading profile picture:\", e);\n                e.target.src = defaultProfilePic;\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-info\",\n            children: /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: user.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this)\n      }, user._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MyFolliwngPost, \"k4QiIZU8CQEBjXiUhBHHR9DG5I8=\", false, function () {\n  return [useNavigate];\n});\n\n_c = MyFolliwngPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyFolliwngPost\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Link","MyFolliwngPost","navigate","followedUsers","setFollowedUsers","defaultProfilePic","currentUserId","JSON","parse","localStorage","getItem","_id","handleProfileClick","userId","token","currentUser","console","log","fetch","headers","Authorization","then","res","json","result","Array","isArray","uniqueUsers","reduce","acc","post","postedBy","some","user","push","name","Photo","catch","err","error","textAlign","marginBottom","length","padding","map","cursor","e","target","src"],"sources":["/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/src/components/MyFollowingPost.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./Home.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\n\nexport default function MyFolliwngPost() {\n  const navigate = useNavigate();\n  const [followedUsers, setFollowedUsers] = useState([]);\n  const defaultProfilePic = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";\n\n  // Get current user's ID from localStorage\n  const currentUserId = JSON.parse(localStorage.getItem(\"user\"))?._id;\n\n  // Handle profile click\n  const handleProfileClick = (userId) => {\n    if (userId === currentUserId) {\n      navigate(\"/profile\");\n    } else {\n      navigate(`/profile/${userId}`);\n    }\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"jwt\");\n    if (!token) {\n      navigate(\"./signup\");\n    }\n\n    // Get current user data for debugging\n    const currentUser = JSON.parse(localStorage.getItem(\"user\"));\n    console.log(\"Current user data:\", currentUser);\n\n    // Fetching followed users\n    fetch(\"http://localhost:4000/myfollwingpost\", {\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        console.log(\"Raw API response:\", result);\n        \n        // If result is an array of posts, extract unique users\n        if (Array.isArray(result)) {\n          const uniqueUsers = result.reduce((acc, post) => {\n            if (post.postedBy && !acc.some(user => user._id === post.postedBy._id)) {\n              acc.push({\n                _id: post.postedBy._id,\n                name: post.postedBy.name,\n                Photo: post.postedBy.Photo\n              });\n            }\n            return acc;\n          }, []);\n          \n          console.log(\"Extracted unique users:\", uniqueUsers);\n          setFollowedUsers(uniqueUsers);\n        } else {\n          console.log(\"Unexpected API response format:\", result);\n          setFollowedUsers([]);\n        }\n      })\n      .catch((err) => {\n        console.error(\"Error fetching followed users:\", err);\n        setFollowedUsers([]);\n      });\n  }, []);\n\n  return (\n    <div className=\"home\">\n      <h2 style={{ textAlign: 'center', marginBottom: '20px' }}>People You Follow</h2>\n      \n      {followedUsers.length === 0 ? (\n        <div style={{ textAlign: 'center', padding: '20px' }}>\n          <h3>No followed users</h3>\n          <p>Start following people to see their profiles here!</p>\n        </div>\n      ) : (\n        <div className=\"followed-users-grid\">\n          {followedUsers.map((user) => (\n            <div \n              className=\"user-card\" \n              key={user._id}\n              onClick={() => handleProfileClick(user._id)}\n              style={{ cursor: 'pointer' }}\n            >\n              <div className=\"user-profile\">\n                <div className=\"user-pic\">\n                  <img\n                    src={user.Photo || defaultProfilePic}\n                    alt={user.name}\n                    onError={(e) => {\n                      console.log(\"Error loading profile picture:\", e);\n                      e.target.src = defaultProfilePic;\n                    }}\n                  />\n                </div>\n                <div className=\"user-info\">\n                  <h4>{user.name}</h4>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}