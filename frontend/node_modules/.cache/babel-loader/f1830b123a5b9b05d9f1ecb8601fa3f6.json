{"ast":null,"code":"\"use client\";\n\nimport { jsx } from 'react/jsx-runtime';\nimport * as React from 'react';\nimport { useId, useMemo } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { PopChild } from './PopChild.mjs';\n\nconst PresenceChild = _ref => {\n  let {\n    children,\n    initial,\n    isPresent,\n    onExitComplete,\n    custom,\n    presenceAffectsLayout,\n    mode,\n    anchorX\n  } = _ref;\n  const presenceChildren = useConstant(newChildrenMap);\n  const id = useId();\n  let isReusedContext = true;\n  let context = useMemo(() => {\n    isReusedContext = false;\n    return {\n      id,\n      initial,\n      isPresent,\n      custom,\n      onExitComplete: childId => {\n        presenceChildren.set(childId, true);\n\n        for (const isComplete of presenceChildren.values()) {\n          if (!isComplete) return; // can stop searching when any is incomplete\n        }\n\n        onExitComplete && onExitComplete();\n      },\n      register: childId => {\n        presenceChildren.set(childId, false);\n        return () => presenceChildren.delete(childId);\n      }\n    };\n  }, [isPresent, presenceChildren, onExitComplete]);\n  /**\n   * If the presence of a child affects the layout of the components around it,\n   * we want to make a new context value to ensure they get re-rendered\n   * so they can detect that layout change.\n   */\n\n  if (presenceAffectsLayout && isReusedContext) {\n    context = { ...context\n    };\n  }\n\n  useMemo(() => {\n    presenceChildren.forEach((_, key) => presenceChildren.set(key, false));\n  }, [isPresent]);\n  /**\n   * If there's no `motion` components to fire exit animations, we want to remove this\n   * component immediately.\n   */\n\n  React.useEffect(() => {\n    !isPresent && !presenceChildren.size && onExitComplete && onExitComplete();\n  }, [isPresent]);\n\n  if (mode === \"popLayout\") {\n    children = jsx(PopChild, {\n      isPresent: isPresent,\n      anchorX: anchorX,\n      children: children\n    });\n  }\n\n  return jsx(PresenceContext.Provider, {\n    value: context,\n    children: children\n  });\n};\n\nfunction newChildrenMap() {\n  return new Map();\n}\n\nexport { PresenceChild };","map":{"version":3,"names":["jsx","React","useId","useMemo","PresenceContext","useConstant","PopChild","PresenceChild","children","initial","isPresent","onExitComplete","custom","presenceAffectsLayout","mode","anchorX","presenceChildren","newChildrenMap","id","isReusedContext","context","childId","set","isComplete","values","register","delete","forEach","_","key","useEffect","size","Provider","value","Map"],"sources":["/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/node_modules/framer-motion/dist/es/components/AnimatePresence/PresenceChild.mjs"],"sourcesContent":["\"use client\";\nimport { jsx } from 'react/jsx-runtime';\nimport * as React from 'react';\nimport { useId, useMemo } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { PopChild } from './PopChild.mjs';\n\nconst PresenceChild = ({ children, initial, isPresent, onExitComplete, custom, presenceAffectsLayout, mode, anchorX, }) => {\n    const presenceChildren = useConstant(newChildrenMap);\n    const id = useId();\n    let isReusedContext = true;\n    let context = useMemo(() => {\n        isReusedContext = false;\n        return {\n            id,\n            initial,\n            isPresent,\n            custom,\n            onExitComplete: (childId) => {\n                presenceChildren.set(childId, true);\n                for (const isComplete of presenceChildren.values()) {\n                    if (!isComplete)\n                        return; // can stop searching when any is incomplete\n                }\n                onExitComplete && onExitComplete();\n            },\n            register: (childId) => {\n                presenceChildren.set(childId, false);\n                return () => presenceChildren.delete(childId);\n            },\n        };\n    }, [isPresent, presenceChildren, onExitComplete]);\n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    if (presenceAffectsLayout && isReusedContext) {\n        context = { ...context };\n    }\n    useMemo(() => {\n        presenceChildren.forEach((_, key) => presenceChildren.set(key, false));\n    }, [isPresent]);\n    /**\n     * If there's no `motion` components to fire exit animations, we want to remove this\n     * component immediately.\n     */\n    React.useEffect(() => {\n        !isPresent &&\n            !presenceChildren.size &&\n            onExitComplete &&\n            onExitComplete();\n    }, [isPresent]);\n    if (mode === \"popLayout\") {\n        children = (jsx(PopChild, { isPresent: isPresent, anchorX: anchorX, children: children }));\n    }\n    return (jsx(PresenceContext.Provider, { value: context, children: children }));\n};\nfunction newChildrenMap() {\n    return new Map();\n}\n\nexport { PresenceChild };\n"],"mappings":"AAAA;;AACA,SAASA,GAAT,QAAoB,mBAApB;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AACA,SAASC,KAAT,EAAgBC,OAAhB,QAA+B,OAA/B;AACA,SAASC,eAAT,QAAgC,mCAAhC;AACA,SAASC,WAAT,QAA4B,8BAA5B;AACA,SAASC,QAAT,QAAyB,gBAAzB;;AAEA,MAAMC,aAAa,GAAG,QAAqG;EAAA,IAApG;IAAEC,QAAF;IAAYC,OAAZ;IAAqBC,SAArB;IAAgCC,cAAhC;IAAgDC,MAAhD;IAAwDC,qBAAxD;IAA+EC,IAA/E;IAAqFC;EAArF,CAAoG;EACvH,MAAMC,gBAAgB,GAAGX,WAAW,CAACY,cAAD,CAApC;EACA,MAAMC,EAAE,GAAGhB,KAAK,EAAhB;EACA,IAAIiB,eAAe,GAAG,IAAtB;EACA,IAAIC,OAAO,GAAGjB,OAAO,CAAC,MAAM;IACxBgB,eAAe,GAAG,KAAlB;IACA,OAAO;MACHD,EADG;MAEHT,OAFG;MAGHC,SAHG;MAIHE,MAJG;MAKHD,cAAc,EAAGU,OAAD,IAAa;QACzBL,gBAAgB,CAACM,GAAjB,CAAqBD,OAArB,EAA8B,IAA9B;;QACA,KAAK,MAAME,UAAX,IAAyBP,gBAAgB,CAACQ,MAAjB,EAAzB,EAAoD;UAChD,IAAI,CAACD,UAAL,EACI,OAF4C,CAEpC;QACf;;QACDZ,cAAc,IAAIA,cAAc,EAAhC;MACH,CAZE;MAaHc,QAAQ,EAAGJ,OAAD,IAAa;QACnBL,gBAAgB,CAACM,GAAjB,CAAqBD,OAArB,EAA8B,KAA9B;QACA,OAAO,MAAML,gBAAgB,CAACU,MAAjB,CAAwBL,OAAxB,CAAb;MACH;IAhBE,CAAP;EAkBH,CApBoB,EAoBlB,CAACX,SAAD,EAAYM,gBAAZ,EAA8BL,cAA9B,CApBkB,CAArB;EAqBA;AACJ;AACA;AACA;AACA;;EACI,IAAIE,qBAAqB,IAAIM,eAA7B,EAA8C;IAC1CC,OAAO,GAAG,EAAE,GAAGA;IAAL,CAAV;EACH;;EACDjB,OAAO,CAAC,MAAM;IACVa,gBAAgB,CAACW,OAAjB,CAAyB,CAACC,CAAD,EAAIC,GAAJ,KAAYb,gBAAgB,CAACM,GAAjB,CAAqBO,GAArB,EAA0B,KAA1B,CAArC;EACH,CAFM,EAEJ,CAACnB,SAAD,CAFI,CAAP;EAGA;AACJ;AACA;AACA;;EACIT,KAAK,CAAC6B,SAAN,CAAgB,MAAM;IAClB,CAACpB,SAAD,IACI,CAACM,gBAAgB,CAACe,IADtB,IAEIpB,cAFJ,IAGIA,cAAc,EAHlB;EAIH,CALD,EAKG,CAACD,SAAD,CALH;;EAMA,IAAII,IAAI,KAAK,WAAb,EAA0B;IACtBN,QAAQ,GAAIR,GAAG,CAACM,QAAD,EAAW;MAAEI,SAAS,EAAEA,SAAb;MAAwBK,OAAO,EAAEA,OAAjC;MAA0CP,QAAQ,EAAEA;IAApD,CAAX,CAAf;EACH;;EACD,OAAQR,GAAG,CAACI,eAAe,CAAC4B,QAAjB,EAA2B;IAAEC,KAAK,EAAEb,OAAT;IAAkBZ,QAAQ,EAAEA;EAA5B,CAA3B,CAAX;AACH,CAlDD;;AAmDA,SAASS,cAAT,GAA0B;EACtB,OAAO,IAAIiB,GAAJ,EAAP;AACH;;AAED,SAAS3B,aAAT"},"metadata":{},"sourceType":"module"}