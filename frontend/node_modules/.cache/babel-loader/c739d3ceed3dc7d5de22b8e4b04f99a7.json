{"ast":null,"code":"var _jsxFileName = \"/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/src/components/MyFollowingPost.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport \"./Home.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MyFolliwngPost() {\n  _s();\n\n  var _JSON$parse;\n\n  const navigate = useNavigate();\n  const [followedUsers, setFollowedUsers] = useState([]);\n  const defaultProfilePic = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\"; // Get current user's ID from localStorage\n\n  const currentUserId = (_JSON$parse = JSON.parse(localStorage.getItem(\"user\"))) === null || _JSON$parse === void 0 ? void 0 : _JSON$parse._id; // Handle profile click\n\n  const handleProfileClick = (userId, e) => {\n    e.preventDefault();\n\n    if (userId === currentUserId) {\n      navigate(\"/profile\");\n    } else {\n      navigate(`/profile/${userId}`);\n    }\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"jwt\");\n\n    if (!token) {\n      navigate(\"./signup\");\n    } // Get current user data for debugging\n\n\n    const currentUser = JSON.parse(localStorage.getItem(\"user\"));\n    console.log(\"Current user data:\", currentUser); // Fetching followed users\n\n    fetch(\"http://localhost:4000/myfollwingpost\", {\n      // Changed back to original endpoint\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n      }\n    }).then(res => res.json()).then(result => {\n      console.log(\"Raw API response:\", result); // If result is an array of posts, extract unique users\n\n      if (Array.isArray(result)) {\n        const uniqueUsers = result.reduce((acc, post) => {\n          if (post.postedBy && !acc.some(user => user._id === post.postedBy._id)) {\n            acc.push({\n              _id: post.postedBy._id,\n              name: post.postedBy.name,\n              Photo: post.postedBy.Photo\n            });\n          }\n\n          return acc;\n        }, []);\n        console.log(\"Extracted unique users:\", uniqueUsers);\n        setFollowedUsers(uniqueUsers);\n      } else {\n        console.log(\"Unexpected API response format:\", result);\n        setFollowedUsers([]);\n      }\n    }).catch(err => {\n      console.error(\"Error fetching followed users:\", err);\n      setFollowedUsers([]);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        textAlign: 'center',\n        marginBottom: '20px'\n      },\n      children: \"People You Follow\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), followedUsers.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        textAlign: 'center',\n        padding: '20px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"No followed users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Start following people to see their profiles here!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"followed-users-grid\",\n      children: followedUsers.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-card\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"user-profile\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-pic\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: user.Photo || defaultProfilePic,\n              alt: user.name,\n              onError: e => {\n                console.log(\"Error loading profile picture:\", e);\n                e.target.src = defaultProfilePic;\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"user-info\",\n            children: /*#__PURE__*/_jsxDEV(\"h4\", {\n              children: /*#__PURE__*/_jsxDEV(Link, {\n                to: `/profile/${user._id}`,\n                onClick: e => handleProfileClick(user._id, e),\n                children: user.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 96,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }, this)\n      }, user._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MyFolliwngPost, \"k4QiIZU8CQEBjXiUhBHHR9DG5I8=\", false, function () {\n  return [useNavigate];\n});\n\n_c = MyFolliwngPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"MyFolliwngPost\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","Link","MyFolliwngPost","navigate","followedUsers","setFollowedUsers","defaultProfilePic","currentUserId","JSON","parse","localStorage","getItem","_id","handleProfileClick","userId","e","preventDefault","token","currentUser","console","log","fetch","headers","Authorization","then","res","json","result","Array","isArray","uniqueUsers","reduce","acc","post","postedBy","some","user","push","name","Photo","catch","err","error","textAlign","marginBottom","length","padding","map","target","src"],"sources":["/Users/sparshsinghal/Downloads/vybes-mern-main/frontend/src/components/MyFollowingPost.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./Home.css\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\n\nexport default function MyFolliwngPost() {\n  const navigate = useNavigate();\n  const [followedUsers, setFollowedUsers] = useState([]);\n  const defaultProfilePic = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";\n\n  // Get current user's ID from localStorage\n  const currentUserId = JSON.parse(localStorage.getItem(\"user\"))?._id;\n\n  // Handle profile click\n  const handleProfileClick = (userId, e) => {\n    e.preventDefault();\n    if (userId === currentUserId) {\n      navigate(\"/profile\");\n    } else {\n      navigate(`/profile/${userId}`);\n    }\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"jwt\");\n    if (!token) {\n      navigate(\"./signup\");\n    }\n\n    // Get current user data for debugging\n    const currentUser = JSON.parse(localStorage.getItem(\"user\"));\n    console.log(\"Current user data:\", currentUser);\n\n    // Fetching followed users\n    fetch(\"http://localhost:4000/myfollwingpost\", {  // Changed back to original endpoint\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        console.log(\"Raw API response:\", result);\n        \n        // If result is an array of posts, extract unique users\n        if (Array.isArray(result)) {\n          const uniqueUsers = result.reduce((acc, post) => {\n            if (post.postedBy && !acc.some(user => user._id === post.postedBy._id)) {\n              acc.push({\n                _id: post.postedBy._id,\n                name: post.postedBy.name,\n                Photo: post.postedBy.Photo\n              });\n            }\n            return acc;\n          }, []);\n          \n          console.log(\"Extracted unique users:\", uniqueUsers);\n          setFollowedUsers(uniqueUsers);\n        } else {\n          console.log(\"Unexpected API response format:\", result);\n          setFollowedUsers([]);\n        }\n      })\n      .catch((err) => {\n        console.error(\"Error fetching followed users:\", err);\n        setFollowedUsers([]);\n      });\n  }, []);\n\n  return (\n    <div className=\"home\">\n      <h2 style={{ textAlign: 'center', marginBottom: '20px' }}>People You Follow</h2>\n      \n      {followedUsers.length === 0 ? (\n        <div style={{ textAlign: 'center', padding: '20px' }}>\n          <h3>No followed users</h3>\n          <p>Start following people to see their profiles here!</p>\n        </div>\n      ) : (\n        <div className=\"followed-users-grid\">\n          {followedUsers.map((user) => (\n            <div className=\"user-card\" key={user._id}>\n              <div className=\"user-profile\">\n                <div className=\"user-pic\">\n                  <img\n                    src={user.Photo || defaultProfilePic}\n                    alt={user.name}\n                    onError={(e) => {\n                      console.log(\"Error loading profile picture:\", e);\n                      e.target.src = defaultProfilePic;\n                    }}\n                  />\n                </div>\n                <div className=\"user-info\">\n                  <h4>\n                    <Link \n                      to={`/profile/${user._id}`}\n                      onClick={(e) => handleProfileClick(user._id, e)}\n                    >\n                      {user.name}\n                    </Link>\n                  </h4>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}