{"ast":null,"code":"import _slicedToArray from\"/Users/sparshsinghal/Downloads/Instagram-mern-stack-main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import PostDetail from\"./PostDetail\";import\"./Profile.css\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserProfie(){var picLink=\"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";var _useParams=useParams(),userid=_useParams.userid;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isFollow=_useState2[0],setIsFollow=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),posts=_useState6[0],setPosts=_useState6[1];// to follow user\nvar followUser=function followUser(userId){fetch(\"http://localhost:5000/follow\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userId})}).then(function(res){return res.json();}).then(function(data){console.log(data);setIsFollow(true);});};// to unfollow user\nvar unfollowUser=function unfollowUser(userId){fetch(\"http://localhost:5000/unfollow\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userId})}).then(function(res){res.json();}).then(function(data){console.log(data);setIsFollow(false);});};useEffect(function(){fetch(\"http://localhost:5000/user/\".concat(userid),{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(function(res){return res.json();}).then(function(result){console.log(result);setUser(result.user);setPosts(result.post);if(result.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)){setIsFollow(true);}});},[isFollow]);return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{src:user.Photo?user.Photo:picLink,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pofile-data\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:user.name}),/*#__PURE__*/_jsx(\"button\",{className:\"followBtn\",onClick:function onClick(){if(isFollow){unfollowUser(user._id);}else{followUser(user._id);}},children:isFollow?\"Unfollow\":\"Follow\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[posts.length,\" posts\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" following\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"90%\",opacity:\"0.8\",margin:\"25px auto\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:posts.map(function(pics){return/*#__PURE__*/_jsx(\"img\",{src:pics.photo// onClick={() => {\n//     toggleDetails(pics)\n// }}\n,className:\"item\"},pics._id);})})]});}","map":{"version":3,"names":["React","useEffect","useState","PostDetail","useParams","UserProfie","picLink","userid","isFollow","setIsFollow","user","setUser","posts","setPosts","followUser","userId","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","followId","then","res","json","data","console","log","unfollowUser","result","post","followers","includes","parse","_id","Photo","display","alignItems","justifyContent","name","length","following","width","opacity","margin","map","pics","photo"],"sources":["/Users/sparshsinghal/Downloads/Instagram-mern-stack-main/frontend/src/components/UserProfile.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport PostDetail from \"./PostDetail\";\nimport \"./Profile.css\";\nimport { useParams } from \"react-router-dom\";\n\nexport default function UserProfie() {\n  var picLink = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";\n  const { userid } = useParams();\n  const [isFollow, setIsFollow] = useState(false);\n  const [user, setUser] = useState(\"\");\n  const [posts, setPosts] = useState([]);\n\n  // to follow user\n  const followUser = (userId) => {\n    fetch(\"http://localhost:5000/follow\", {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n      },\n      body: JSON.stringify({\n        followId: userId,\n      }),\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(data);\n        setIsFollow(true);\n      });\n  };\n\n  // to unfollow user\n  const unfollowUser = (userId) => {\n    fetch(\"http://localhost:5000/unfollow\", {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n      },\n      body: JSON.stringify({\n        followId: userId,\n      }),\n    })\n      .then((res) => {\n        res.json();\n      })\n      .then((data) => {\n        console.log(data);\n        setIsFollow(false);\n      });\n  };\n\n  useEffect(() => {\n    fetch(`http://localhost:5000/user/${userid}`, {\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n      },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        console.log(result);\n        setUser(result.user);\n        setPosts(result.post);\n        if (\n          result.user.followers.includes(\n            JSON.parse(localStorage.getItem(\"user\"))._id\n          )\n        ) {\n          setIsFollow(true);\n        }\n      });\n  }, [isFollow]);\n\n  return (\n    <div className=\"profile\">\n      {/* Profile frame */}\n      <div className=\"profile-frame\">\n        {/* profile-pic */}\n        <div className=\"profile-pic\">\n          <img src={user.Photo ? user.Photo : picLink} alt=\"\" />\n        </div>\n        {/* profile-data */}\n        <div className=\"pofile-data\">\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <h1>{user.name}</h1>\n            <button\n              className=\"followBtn\"\n              onClick={() => {\n                if (isFollow) {\n                  unfollowUser(user._id);\n                } else {\n                  followUser(user._id);\n                }\n              }}\n            >\n              {isFollow ? \"Unfollow\" : \"Follow\"}\n            </button>\n          </div>\n          <div className=\"profile-info\" style={{ display: \"flex\" }}>\n            <p>{posts.length} posts</p>\n            <p>{user.followers ? user.followers.length : \"0\"} followers</p>\n            <p>{user.following ? user.following.length : \"0\"} following</p>\n          </div>\n        </div>\n      </div>\n      <hr\n        style={{\n          width: \"90%\",\n\n          opacity: \"0.8\",\n          margin: \"25px auto\",\n        }}\n      />\n      {/* Gallery */}\n      <div className=\"gallery\">\n        {posts.map((pics) => {\n          return (\n            <img\n              key={pics._id}\n              src={pics.photo}\n              // onClick={() => {\n              //     toggleDetails(pics)\n              // }}\n              className=\"item\"\n            ></img>\n          );\n        })}\n      </div>\n      {/* {show &&\n        <PostDetail item={posts} toggleDetails={toggleDetails} />\n      } */}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}